I"æ
<h3 id="å½“å‰è¿æ¥æ•°">å½“å‰è¿æ¥æ•°</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">from</span> <span class="n">v</span><span class="err">$</span><span class="n">process</span><span class="p">;</span>
<span class="c1">--ä¿®æ”¹æœ€å¤§è¿æ¥æ•°ï¼ˆæŠŠprocessesæ”¹æˆ500å°±å¥½äº†ï¼‰</span>
<span class="k">alter</span> <span class="k">system</span> <span class="k">set</span> <span class="n">processes</span> <span class="o">=</span> <span class="mi">500</span> <span class="k">scope</span> <span class="o">=</span> <span class="n">spfile</span><span class="p">;</span>
<span class="c1">--select value from v$parameter where name = 'processes';</span>
<span class="c1">--COMMIT;</span>
<span class="c1">--å…è®¸æœ€å¤§è¿æ¥æ•° ï¼ˆé»˜è®¤æ˜¯100ï¼‰</span>
<span class="k">select</span> <span class="n">value</span> <span class="k">from</span> <span class="n">v</span><span class="err">$</span><span class="k">parameter</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">'processes'</span><span class="p">;</span>
</code></pre></div></div>

<h3 id="æŸ¥è¯¢sessionä¿¡æ¯">æŸ¥è¯¢sessionä¿¡æ¯</h3>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SHOW</span> <span class="k">PARAMETER</span> <span class="k">SESSION</span><span class="p">;</span>
</code></pre></div></div>

<h3 id="æŸ¥è¯¢processesä¿¡æ¯">æŸ¥è¯¢processesä¿¡æ¯</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SHOW</span> <span class="k">PARAMETER</span> <span class="n">PROCESS</span><span class="p">;</span>
</code></pre></div></div>
<h3 id="åˆ›å»ºè¡¨ç©ºé—´">åˆ›å»ºè¡¨ç©ºé—´</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="n">TABLESPACE</span> <span class="n">TempSpace</span> <span class="n">DATAFILE</span> <span class="s1">'E:</span><span class="se">\S</span><span class="s1">orcery</span><span class="se">\N</span><span class="s1">ecromancy</span><span class="se">\D</span><span class="s1">ataBase</span><span class="se">\d</span><span class="s1">ata</span><span class="se">\T</span><span class="s1">empSpace_DATA.DBF'</span> <span class="k">SIZE</span> <span class="mi">50</span><span class="n">M</span><span class="p">;</span>
</code></pre></div></div>
<h3 id="åˆ›å»ºç”¨æˆ·">åˆ›å»ºç”¨æˆ·</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">USER</span> <span class="n">user1</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="n">user1</span> <span class="k">DEFAULT</span> <span class="n">TABLESPACE</span> <span class="n">TempSpace</span><span class="p">;</span>
</code></pre></div></div>
<h3 id="æˆäºˆç”¨æˆ·dbaæƒé™">æˆäºˆç”¨æˆ·DBAæƒé™</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">GRANT</span> <span class="n">DBA</span> <span class="k">TO</span> <span class="n">user1</span><span class="p">;</span>
</code></pre></div></div>
<h3 id="åˆ›å»ºè¡¨">åˆ›å»ºè¡¨</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="k">Temp</span>
<span class="p">(</span>
  <span class="n">sno</span> <span class="nb">CHAR</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
  <span class="n">sname</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">13</span><span class="p">)</span> <span class="k">UNIQUE</span><span class="p">,</span>
  <span class="n">gender</span> <span class="nb">CHAR</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="k">CHECK</span><span class="p">(</span><span class="n">gender</span> <span class="k">in</span> <span class="p">(</span><span class="s1">'ç”·'</span><span class="p">,</span> <span class="s1">'å¥³'</span><span class="p">)),</span>
  <span class="n">dept</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="n">remarks</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="k">DEFAULT</span><span class="p">(</span><span class="s1">'ä¸‰å¥½å­¦ç”Ÿ'</span><span class="p">)</span>
<span class="p">);</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">Temp</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">ScoreTable</span>
<span class="p">(</span>
  <span class="n">sno</span> <span class="nb">CHAR</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span> <span class="c1">--REFERENCES Temp(sno),</span>
  <span class="n">cno</span> <span class="nb">CHAR</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="k">DEFAULT</span><span class="p">(</span><span class="s1">'0001'</span><span class="p">),</span>
  <span class="n">score</span> <span class="nb">INT</span> <span class="k">DEFAULT</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
  <span class="c1">--CONSTRAINT cno_ScoreTable FOREIGN KEY(cno)REFERENCES Subject(nationkey)</span>
  
  <span class="c1">--PRIMARY KEY(sno,cno),/*å®šä¹‰ä¸»ç */</span>
  <span class="c1">-- FOREIGN KEY(sno)REFERENCES Temp(sno),</span>
  <span class="c1">-- FOREIGN KEY(cno)REFERENCES Subject(cno)</span>
<span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">ScoreTable</span> <span class="k">VALUES</span><span class="p">(</span><span class="mi">189074010</span><span class="p">,</span> <span class="mi">0001</span><span class="p">,</span> <span class="mi">88</span><span class="p">);</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">ScoreTable</span> <span class="p">;</span>
<span class="k">UPDATE</span> <span class="n">ScoreTable</span> <span class="k">SET</span> <span class="n">cno</span> <span class="o">=</span> <span class="s1">'0001'</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">Subject</span>
<span class="p">(</span>
  <span class="n">cno</span> <span class="nb">CHAR</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
  <span class="n">cname</span> <span class="n">VARCHAR2</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">UNIQUE</span>
<span class="p">);</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">Subject</span> <span class="k">MODIFY</span> <span class="n">cname</span> <span class="n">VARCHAR2</span><span class="p">(</span><span class="mi">30</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Subject</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'0008'</span><span class="p">,</span> <span class="s1">'ç¦»æ•£æ•°å­¦'</span><span class="p">);</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">Subject</span><span class="p">;</span>
</code></pre></div></div>
<h3 id="å‚ç…§å®Œæ•´æ€§">å‚ç…§å®Œæ•´æ€§</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">ScoreTable</span> <span class="k">ADD</span> <span class="k">CONSTRAINT</span> <span class="n">sno_const</span> <span class="k">FOREIGN</span> <span class="k">KEY</span><span class="p">(</span><span class="n">sno</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="k">Temp</span><span class="p">(</span><span class="n">sno</span><span class="p">);</span> 
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">ScoreTable</span> <span class="k">ADD</span> <span class="k">CONSTRAINT</span> <span class="n">cno_const</span> <span class="k">FOREIGN</span> <span class="k">KEY</span><span class="p">(</span><span class="n">cno</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">Subject</span><span class="p">(</span><span class="n">cno</span><span class="p">);</span>
<span class="c1">-- ALTER TABLE ScoreTable DROP CONSTRAINT sno_const;</span>
</code></pre></div></div>
<h3 id="ä¿®æ”¹åŸºæœ¬è¡¨">ä¿®æ”¹åŸºæœ¬è¡¨</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="k">Temp</span> <span class="k">ADD</span> <span class="k">CONSTRAINT</span> <span class="n">temp_dept_uni</span> <span class="k">UNIQUE</span><span class="p">(</span><span class="n">dept</span><span class="p">);</span><span class="c1">-- å¢åŠ çº¦æŸæ¡ä»¶</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="k">Temp</span> <span class="k">DROP</span> <span class="k">CONSTRAINT</span> <span class="n">temp_dept_uni</span><span class="p">;</span><span class="c1">-- åˆ é™¤çº¦æŸæ¡ä»¶</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">Subject</span> <span class="k">ADD</span> <span class="n">ctime</span> <span class="nb">INT</span> <span class="k">DEFAULT</span><span class="p">(</span><span class="mi">40</span><span class="p">);</span><span class="c1">-- å¢åŠ å±æ€§</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="k">Temp</span> <span class="k">ADD</span> <span class="n">resume</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">);</span><span class="c1">-- å¢åŠ å±æ€§</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="k">Temp</span> <span class="k">DROP</span> <span class="k">COLUMN</span> <span class="n">resume</span><span class="p">;</span><span class="c1">-- åˆ é™¤å±æ€§</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">ScoreTable</span> <span class="k">ADD</span> <span class="k">no</span> <span class="nb">INT</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">ScoreTable</span> <span class="k">DROP</span> <span class="k">COLUMN</span> <span class="k">no</span><span class="p">;</span>
<span class="c1">-- SELECT * FROM ScoreTable;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">ScoreTable</span> <span class="k">ADD</span> <span class="n">ID</span> <span class="nb">INT</span> <span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">ScoreTable</span> <span class="k">DROP</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">ScoreTable</span> <span class="k">ADD</span> <span class="k">CONSTRAINT</span> <span class="n">st_prk</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">(</span><span class="n">ID</span><span class="p">);</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="k">Temp</span> <span class="k">MODIFY</span> <span class="n">sname</span> <span class="n">VARCHAR2</span><span class="p">(</span><span class="mi">14</span><span class="err">ï¼‰</span><span class="p">;</span> <span class="c1">-- è¿™æ ·ä¸ä¼šå»é™¤snameçš„å”¯ä¸€çº¦æŸæ¡ä»¶</span>
<span class="c1">-- å¦‚ä¸‹å†™æ³•æ˜¯é”™è¯¯çš„ï¼š</span>
<span class="c1">-- ALTER TABLE Temp MODIFY sname VARCHAR2(14ï¼‰UNIQUE;</span>
</code></pre></div></div>
<h3 id="åˆ é™¤åŸºæœ¬è¡¨">åˆ é™¤åŸºæœ¬è¡¨</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- DROP TABLE Temp;</span>
</code></pre></div></div>
<h3 id="å‘è¡¨ä¸­æ’å…¥æ•°æ®">å‘è¡¨ä¸­æ’å…¥æ•°æ®</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">INSERT</span> <span class="k">INTO</span> <span class="k">Temp</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'189074004'</span><span class="p">,</span> <span class="s1">'Jim'</span><span class="p">,</span> <span class="s1">'ç”·'</span><span class="p">,</span> <span class="s1">'æœºæ¢°'</span><span class="p">,</span> <span class="s1">'ä¸‰åå­¦ç”Ÿ'</span><span class="p">);</span><span class="c1">-- å•è¡Œæ’å…¥</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="k">Temp</span><span class="p">(</span><span class="n">sno</span><span class="p">,</span> <span class="n">sname</span><span class="p">,</span> <span class="n">dept</span><span class="p">)</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'189074000'</span><span class="p">,</span> <span class="s1">'Jenny'</span><span class="p">,</span> <span class="s1">'æœºæ¢°'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="k">Temp</span> <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">Stu</span><span class="p">;</span><span class="c1">-- å¤šè¡Œæ’å…¥ï¼ˆè¡¨é—´æ‹·è´ï¼‰</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">XS</span> <span class="k">AS</span> <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">TEMP</span><span class="p">;</span><span class="c1">-- åˆ›å»ºè¡¨XSå¹¶æ’å…¥è¡¨Tempä¸­çš„æ‰€æœ‰æ•°æ®</span>
</code></pre></div></div>
<h3 id="æ›´æ”¹è®°å½•">æ›´æ”¹è®°å½•</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">UPDATE</span> <span class="k">Temp</span> <span class="k">SET</span> <span class="n">remarks</span> <span class="o">=</span> <span class="s1">'ä¸‰å¥½å­¦ç”Ÿ'</span><span class="p">;</span><span class="c1">-- ä¿®æ”¹æ‰€æœ‰è®°å½•</span>
<span class="k">UPDATE</span> <span class="k">Temp</span> <span class="k">SET</span> <span class="n">remarks</span> <span class="o">=</span> <span class="s1">'ä¸‰åå­¦ç”Ÿ'</span> <span class="k">WHERE</span> <span class="n">sno</span> <span class="o">=</span> <span class="s1">'189074005'</span><span class="p">;</span> 
<span class="k">UPDATE</span> <span class="k">Temp</span> <span class="k">SET</span> <span class="n">remarks</span> <span class="o">=</span> <span class="s1">'ä¸‰åå­¦ç”Ÿ'</span><span class="p">,</span> <span class="n">dept</span> <span class="o">=</span> <span class="s1">'è½¯ä»¶å·¥ç¨‹'</span> <span class="k">WHERE</span> <span class="n">sno</span> <span class="o">=</span> <span class="s1">'189074006'</span><span class="p">;</span> 
<span class="k">UPDATE</span> <span class="n">ScoreTable</span> <span class="k">SET</span> <span class="n">ID</span> <span class="o">=</span> <span class="n">to_number</span><span class="p">(</span><span class="n">sno</span><span class="p">)</span>  <span class="o">-</span> <span class="mi">189074000</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">ScoreTable</span><span class="p">;</span>
</code></pre></div></div>
<h3 id="åˆ é™¤è®°å½•">åˆ é™¤è®°å½•</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">DELETE</span> <span class="k">FROM</span> <span class="k">Temp</span> <span class="k">WHERE</span> <span class="n">dept</span> <span class="o">=</span> <span class="s1">'æœºæ¢°'</span><span class="p">;</span>
</code></pre></div></div>
<h3 id="å•è¡¨æŸ¥è¯¢">å•è¡¨æŸ¥è¯¢</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="mi">3</span> <span class="o">+</span> <span class="mi">5</span> <span class="k">FROM</span> <span class="n">DUAL</span><span class="p">;</span><span class="c1">-- è¡¨è¾¾å¼æ±‚å€¼</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">Temp</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="n">sno</span><span class="p">,</span> <span class="n">sname</span> <span class="k">FROM</span> <span class="k">Temp</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="n">sno</span> <span class="k">AS</span> <span class="err">å­¦å·</span><span class="p">,</span> <span class="n">sname</span> <span class="k">AS</span> <span class="err">å§“å</span> <span class="k">FROM</span> <span class="k">Temp</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="n">dept</span> <span class="k">FROM</span> <span class="k">Temp</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="k">DISTINCT</span> <span class="n">dept</span> <span class="k">FROM</span> <span class="k">Temp</span><span class="p">;</span><span class="c1">-- æŠ•å½±-- DISTINCT å¿…é¡»æ”¾åœ¨å¼€å¤´</span>
<span class="k">SELECT</span> <span class="k">DISTINCT</span> <span class="n">sno</span><span class="p">,</span> <span class="n">score</span> <span class="k">FROM</span> <span class="n">ScoreTable</span><span class="p">;</span><span class="c1">-- æ ¹æ®å­—æ®µsnoå’Œscoreå»é‡</span>
<span class="k">SELECT</span> <span class="n">sno</span><span class="p">,</span> <span class="n">credit</span> <span class="k">FROM</span> <span class="k">Temp</span> <span class="k">WHERE</span> <span class="n">credit</span> <span class="o">&gt;</span> <span class="mi">50</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="n">sno</span><span class="p">,</span> <span class="n">credit</span> <span class="k">FROM</span> <span class="k">Temp</span> <span class="k">WHERE</span> <span class="n">credit</span> <span class="k">BETWEEN</span> <span class="mi">55</span> <span class="k">AND</span> <span class="mi">57</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="n">sno</span><span class="p">,</span> <span class="n">credit</span> <span class="k">FROM</span> <span class="k">Temp</span> <span class="k">WHERE</span> <span class="n">credit</span> <span class="k">NOT</span> <span class="k">BETWEEN</span> <span class="mi">55</span> <span class="k">AND</span> <span class="mi">57</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="n">sno</span><span class="p">,</span> <span class="n">dept</span> <span class="k">FROM</span> <span class="k">Temp</span> <span class="k">WHERE</span> <span class="n">dept</span> <span class="k">IN</span><span class="p">(</span><span class="s1">'è®¡ç®—æœº'</span><span class="p">,</span> <span class="s1">'ç”µæ°”'</span><span class="p">);</span>
<span class="k">SELECT</span> <span class="n">sno</span><span class="p">,</span> <span class="n">dept</span> <span class="k">FROM</span> <span class="k">Temp</span> <span class="k">WHERE</span> <span class="n">dept</span> <span class="k">NOT</span> <span class="k">IN</span><span class="p">(</span><span class="s1">'è®¡ç®—æœº'</span><span class="p">,</span> <span class="s1">'ç”µæ°”'</span><span class="p">);</span>
</code></pre></div></div>
<h4 id="æ¨¡ç³ŠæŸ¥è¯¢">æ¨¡ç³ŠæŸ¥è¯¢</h4>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">sno</span><span class="p">,</span> <span class="n">sname</span> <span class="k">FROM</span> <span class="k">Temp</span> <span class="k">WHERE</span> <span class="n">sname</span> <span class="k">LIKE</span> <span class="s1">'%m%'</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="n">sno</span><span class="p">,</span> <span class="n">sname</span> <span class="k">FROM</span> <span class="k">Temp</span> <span class="k">WHERE</span> <span class="n">sname</span> <span class="k">LIKE</span> <span class="s1">'%m_'</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="n">sno</span><span class="p">,</span> <span class="n">sname</span> <span class="k">FROM</span> <span class="k">Temp</span> <span class="k">WHERE</span> <span class="n">sname</span> <span class="k">LIKE</span> <span class="s1">'ABC</span><span class="se">\_</span><span class="s1">DEF'</span> <span class="k">ESCAPE</span> <span class="s1">'</span><span class="se">\'</span><span class="s1">;
--  åœ¨mysqlä¸­ä¸ç”¨åŠ â€œESCAPE '</span><span class="err">\</span><span class="s1">'â€
 
SELECT sno, credit FROM Temp WHERE credit IS NULL;
SELECT sno, credit FROM Temp WHERE credit IS NOT NULL;
</span></code></pre></div></div>
<h4 id="ç»„å‡½æ•°">ç»„å‡½æ•°</h4>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">AS</span> <span class="err">æ€»äººæ•°</span> <span class="k">FROM</span> <span class="k">Temp</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">dept</span><span class="p">)</span> <span class="k">AS</span> <span class="err">é™¢ç³»æ•°</span> <span class="k">FROM</span> <span class="k">Temp</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="k">AVG</span><span class="p">(</span><span class="n">credit</span><span class="p">)</span> <span class="k">AS</span> <span class="err">ç”µæ°”ä¸“ä¸šå¹³å‡å­¦åˆ†</span> <span class="k">FROM</span> <span class="k">Temp</span> <span class="k">WHERE</span> <span class="n">dept</span> <span class="o">=</span> <span class="s1">'ç”µæ°”'</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="k">MAX</span><span class="p">(</span><span class="n">credit</span><span class="p">)</span> <span class="k">AS</span> <span class="err">æœ€é«˜å­¦åˆ†</span> <span class="k">FROM</span> <span class="k">Temp</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="k">MIN</span><span class="p">(</span><span class="n">credit</span><span class="p">)</span> <span class="k">AS</span> <span class="err">æœ€ä½å­¦åˆ†</span> <span class="k">FROM</span> <span class="k">Temp</span><span class="p">;</span><span class="c1">-- ä¸åŒ…æ‹¬NULL</span>
<span class="k">SELECT</span> <span class="k">SUM</span><span class="p">(</span><span class="n">credit</span><span class="p">)</span> <span class="k">AS</span> <span class="err">å­¦åˆ†ä¹‹å’Œ</span> <span class="k">FROM</span> <span class="k">Temp</span><span class="p">;</span>
</code></pre></div></div>
<h4 id="åˆ†ç»„æŸ¥è¯¢">åˆ†ç»„æŸ¥è¯¢</h4>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">dept</span> <span class="k">AS</span> <span class="err">ç³»åˆ«</span><span class="p">,</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">AS</span> <span class="err">äººæ•°</span> <span class="k">FROM</span> <span class="k">Temp</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">dept</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="n">dept</span> <span class="k">AS</span> <span class="err">ç³»åˆ«</span><span class="p">,</span> <span class="k">AVG</span><span class="p">(</span><span class="n">credit</span><span class="p">)</span> <span class="k">AS</span> <span class="err">å‡åˆ†</span> <span class="k">FROM</span> <span class="k">Temp</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">dept</span><span class="p">;</span>
</code></pre></div></div>
<h4 id="havingå­å¥">HAVINGå­å¥</h4>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- WHEREä½œç”¨äºåŸºæœ¬è¡¨æˆ–è§†å›¾ï¼Œä»ä¸­é€‰æ‹©æ»¡è¶³æ¡ä»¶çš„å…ƒç»„ï¼›</span>
<span class="c1">-- HAVINGçŸ­è¯­ä½œç”¨äºç»„ï¼Œä»ä¸­é€‰æ‹©æ»¡è¶³æ¡ä»¶çš„ç»„ã€‚ </span>
<span class="k">SELECT</span> <span class="n">dept</span><span class="p">,</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="k">Temp</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">dept</span> <span class="k">HAVING</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">;</span>
</code></pre></div></div>
<h4 id="æ’åº">æ’åº</h4>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">Temp</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">sno</span> <span class="k">ASC</span><span class="p">,</span> <span class="k">class</span> <span class="k">DESC</span><span class="p">;</span>
</code></pre></div></div>

<h3 id="å¤šè¡¨æŸ¥è¯¢">å¤šè¡¨æŸ¥è¯¢</h3>

<h4 id="æ— æ¡ä»¶è¿æ¥">æ— æ¡ä»¶è¿æ¥</h4>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">Temp</span><span class="p">,</span> <span class="n">ScoreTable</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="n">ctime</span> <span class="k">FROM</span> <span class="n">Subject</span> <span class="n">a</span><span class="p">,</span><span class="n">ScoreTable</span> <span class="n">b</span> <span class="k">WHERE</span> <span class="n">a</span><span class="p">.</span><span class="n">cno</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">cno</span> <span class="k">AND</span> <span class="n">b</span><span class="p">.</span><span class="n">sno</span> <span class="o">=</span> <span class="s1">'189074004'</span><span class="p">;</span>
</code></pre></div></div>
<h4 id="ç¬›å¡å°”ç§¯">ç¬›å¡å°”ç§¯</h4>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">Temp</span> <span class="k">CROSS</span> <span class="k">JOIN</span> <span class="n">ScoreTable</span><span class="p">;</span>
</code></pre></div></div>
<h4 id="thetaè¿æ¥">thetaè¿æ¥</h4>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="k">Temp</span><span class="p">.</span><span class="o">*</span><span class="p">,</span> <span class="n">ScoreTable</span><span class="p">.</span><span class="o">*</span> <span class="k">FROM</span> <span class="k">Temp</span> <span class="k">join</span> <span class="n">ScoreTable</span> <span class="k">ON</span> <span class="k">Temp</span><span class="p">.</span><span class="n">sno</span> <span class="o">=</span> <span class="n">ScoreTable</span><span class="p">.</span><span class="n">sno</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">Temp</span> <span class="k">JOIN</span> <span class="n">ScoreTable</span> <span class="k">ON</span> <span class="k">Temp</span><span class="p">.</span><span class="n">sno</span> <span class="o">=</span> <span class="n">ScoreTable</span><span class="p">.</span><span class="n">sno</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">Temp</span> <span class="k">JOIN</span> <span class="n">ScoreTable</span> <span class="k">ON</span> <span class="k">Temp</span><span class="p">.</span><span class="n">sno</span> <span class="o">=</span> <span class="n">ScoreTable</span><span class="p">.</span><span class="n">sno</span> <span class="k">WHERE</span> <span class="n">dept</span> <span class="o">=</span> <span class="s1">'è®¡ç®—æœº'</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="k">Temp</span><span class="p">.</span><span class="n">sno</span> <span class="k">ASC</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">Temp</span> <span class="n">a</span> <span class="k">JOIN</span> <span class="n">ScoreTable</span> <span class="n">b</span> <span class="k">ON</span> <span class="n">a</span><span class="p">.</span><span class="n">sno</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">sno</span> <span class="k">JOIN</span> <span class="n">Subject</span> <span class="k">c</span> <span class="k">ON</span> <span class="n">b</span><span class="p">.</span><span class="n">cno</span> <span class="o">=</span> <span class="k">c</span><span class="p">.</span><span class="n">cno</span> <span class="k">WHERE</span> <span class="n">b</span><span class="p">.</span><span class="n">score</span> <span class="o">&gt;=</span> <span class="mi">80</span><span class="p">;</span>
</code></pre></div></div>
<h4 id="è‡ªè¿æ¥">è‡ªè¿æ¥</h4>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">ScoreTable</span> <span class="n">a</span> <span class="k">JOIN</span> <span class="n">ScoreTable</span> <span class="n">b</span> <span class="k">ON</span> <span class="n">a</span><span class="p">.</span><span class="n">sno</span> <span class="o">&lt;&gt;</span> <span class="n">b</span><span class="p">.</span><span class="n">sno</span> <span class="k">WHERE</span> <span class="n">b</span><span class="p">.</span><span class="n">sno</span> <span class="o">=</span> <span class="s1">'189074001'</span> <span class="k">AND</span> <span class="n">a</span><span class="p">.</span><span class="n">score</span> <span class="o">&gt;</span> <span class="n">b</span><span class="p">.</span><span class="n">score</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">Temp</span> <span class="n">a</span> <span class="k">JOIN</span> <span class="k">Temp</span> <span class="n">b</span> <span class="k">ON</span> <span class="n">a</span><span class="p">.</span><span class="n">sno</span> <span class="o">&lt;&gt;</span> <span class="n">b</span><span class="p">.</span><span class="n">sno</span> <span class="k">WHERE</span> <span class="n">a</span><span class="p">.</span><span class="n">sname</span> <span class="o">=</span> <span class="s1">'Tom'</span> <span class="k">AND</span> <span class="n">a</span><span class="p">.</span><span class="n">credit</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">.</span><span class="n">credit</span><span class="p">;</span>
<span class="c1">-- ä¸ä»¥ä¸‹è¯­å¥ç»“æœç›¸åŒï¼šSELECT * FROM Temp a, Temp b WHERE a.sname = 'Tom' AND a.credit &lt; b.credit;</span>
</code></pre></div></div>
<h4 id="å³è¿æ¥">å³è¿æ¥</h4>

<p>å³(å¤–)è¿æ¥ï¼Œå³è¡¨çš„è®°å½•å°†ä¼šå…¨éƒ¨è¡¨ç¤ºå‡ºæ¥ï¼Œè€Œå·¦è¡¨åªä¼šæ˜¾ç¤ºç¬¦åˆæœç´¢æ¡ä»¶çš„è®°å½•ã€‚å·¦è¡¨è®°å½•ä¸è¶³çš„åœ°æ–¹å‡ä¸ºNULLã€‚å·¦(å¤–)è¿æ¥ä¸ä¹‹ç›¸åã€‚</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">ScoreTable</span> <span class="n">a</span> <span class="k">RIGHT</span> <span class="k">JOIN</span> <span class="k">Temp</span> <span class="n">b</span> <span class="k">ON</span> <span class="n">a</span><span class="p">.</span><span class="n">sno</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">sno</span> <span class="k">WHERE</span> <span class="n">a</span><span class="p">.</span><span class="n">sno</span> <span class="k">is</span> <span class="k">NULL</span><span class="p">;</span>
</code></pre></div></div>
<h4 id="è‡ªç„¶è¿æ¥">è‡ªç„¶è¿æ¥</h4>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">Temp</span> <span class="k">JOIN</span> <span class="n">ScoreTable</span> <span class="k">USING</span><span class="p">(</span><span class="n">sno</span><span class="p">);</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">Temp</span> <span class="k">NATURAL</span> <span class="k">JOIN</span> <span class="n">ScoreTable</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">Temp</span> <span class="k">NATURAL</span> <span class="k">JOIN</span> <span class="n">ScoreTable</span> <span class="k">NATURAL</span> <span class="k">JOIN</span> <span class="n">Subject</span><span class="p">;</span>
<span class="c1">-- NATURAL è”æ¥ä¸­ä½¿ç”¨çš„åˆ—ä¸èƒ½æœ‰é™å®šè¯</span>
<span class="c1">-- è¯¯ï¼šSELECT * FROM Temp a NATURAL JOIN ScoreTable b NATURAL JOIN Subject c WHERE a.sno = '189074001';</span>
<span class="c1">-- è¯¯ï¼šSELECT * FROM Temp a NATURAL JOIN ScoreTable b WHERE a.sno = '189074001';</span>
<span class="c1">-- æ­£ï¼šSELECT * FROM Temp a JOIN ScoreTable b ON a.sno = b.sno JOIN Subject c ON b.cno = c.cno WHERE a.sno = '189074001';</span>
</code></pre></div></div>
<h3 id="å­æŸ¥è¯¢">å­æŸ¥è¯¢</h3>

<h4 id="å­æŸ¥è¯¢æ”¾åœ¨whereå­å¥ä¸­">å­æŸ¥è¯¢æ”¾åœ¨WHEREå­å¥ä¸­ï¼š</h4>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">ctime</span> <span class="k">FROM</span> <span class="n">Subject</span> <span class="k">WHERE</span> <span class="n">Subject</span><span class="p">.</span><span class="n">cno</span> <span class="o">=</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">cno</span> <span class="k">FROM</span> <span class="n">ScoreTable</span> <span class="k">WHERE</span> <span class="n">ScoreTable</span><span class="p">.</span><span class="n">sno</span> <span class="o">=</span> <span class="s1">'189074004'</span><span class="p">);</span><span class="c1">-- é€»è¾‘æ¸…æ™°ä½†é€Ÿåº¦æ…¢</span>
<span class="c1">-- åŒï¼šSELECT ctime FROM Subject a, ScoreTable b WHERE a.cno = b.cno AND b.sno = '189074004';</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">Temp</span> <span class="k">WHERE</span> <span class="n">sno</span> <span class="k">IN</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">sno</span> <span class="k">FROM</span> <span class="n">ScoreTable</span> <span class="k">WHERE</span> <span class="n">cno</span>  <span class="o">=</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">cno</span> <span class="k">FROM</span> <span class="n">Subject</span> <span class="k">WHERE</span> <span class="n">cname</span> <span class="o">=</span> <span class="s1">'å¤§å­¦è‹±è¯­'</span><span class="p">));</span>
<span class="c1">-- åŒï¼šSELECT * FROM Temp a, ScoreTable b, Subject c WHERE a.sno = b.sno AND b.cno = c.cno AND c.cname = 'å¤§å­¦è‹±è¯­'; </span>
<span class="c1">-- åŒï¼šSELECT * FROM Temp a JOIN ScoreTable b ON a.sno = b.sno JOIN Subject c ON b.cno = c.cno WHERE cname = 'å¤§å­¦è‹±è¯­';</span>
<span class="c1">-- åŒï¼šSELECT * FROM Temp WHERE sno IN (SELECT sno FROM ScoreTable WHERE cno IN (SELECT cno FROM Subject WHERE cname = 'å¤§å­¦è‹±è¯­'));</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">ScoreTable</span> <span class="k">WHERE</span> <span class="n">score</span> <span class="o">&gt;</span> <span class="p">(</span><span class="k">SELECT</span> <span class="k">MAX</span><span class="p">(</span><span class="n">score</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">ScoreTable</span> <span class="k">WHERE</span> <span class="n">cno</span> <span class="o">=</span> <span class="s1">'0002'</span><span class="p">);</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">ScoreTable</span> <span class="k">WHERE</span> <span class="n">score</span> <span class="o">&gt;</span> <span class="k">ALL</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">score</span> <span class="k">FROM</span> <span class="n">ScoreTable</span> <span class="k">WHERE</span> <span class="n">cno</span> <span class="o">=</span> <span class="s1">'0002'</span><span class="p">);</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">ScoreTable</span> <span class="k">WHERE</span> <span class="n">score</span> <span class="o">&lt;</span> <span class="p">(</span><span class="k">SELECT</span> <span class="k">MIN</span><span class="p">(</span><span class="n">score</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">ScoreTable</span> <span class="k">WHERE</span> <span class="n">cno</span> <span class="o">=</span> <span class="s1">'0001'</span><span class="p">);</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">ScoreTable</span> <span class="k">WHERE</span> <span class="n">score</span> <span class="o">&lt;</span> <span class="k">ALL</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">score</span> <span class="k">FROM</span> <span class="n">ScoreTable</span> <span class="k">WHERE</span> <span class="n">cno</span> <span class="o">=</span> <span class="s1">'0001'</span><span class="p">);</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">ScoreTable</span> <span class="k">WHERE</span> <span class="n">score</span> <span class="o">&gt;</span> <span class="k">ANY</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">score</span> <span class="k">FROM</span> <span class="n">ScoreTable</span> <span class="k">WHERE</span> <span class="n">cno</span> <span class="o">=</span> <span class="s1">'0002'</span><span class="p">);</span>
<span class="c1">--  == </span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">ScoreTable</span> <span class="k">WHERE</span> <span class="n">score</span> <span class="o">&gt;</span> <span class="k">SOME</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">score</span> <span class="k">FROM</span> <span class="n">ScoreTable</span> <span class="k">WHERE</span> <span class="n">cno</span> <span class="o">=</span> <span class="s1">'0002'</span><span class="p">);</span>
</code></pre></div></div>
<h4 id="å°†å­æŸ¥è¯¢æ”¾åœ¨selectä¸­">å°†å­æŸ¥è¯¢æ”¾åœ¨SELECTä¸­ï¼š</h4>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">sno</span><span class="p">,</span> <span class="n">score</span><span class="p">,</span> <span class="p">(</span><span class="k">SELECT</span> <span class="k">MAX</span><span class="p">(</span><span class="n">score</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">ScoreTable</span><span class="p">)</span><span class="n">MaxSocre</span> <span class="k">FROM</span> <span class="n">ScoreTable</span><span class="p">;</span>
</code></pre></div></div>
<h4 id="å°†å­æŸ¥è¯¢æ”¾åœ¨fromä¸­">å°†å­æŸ¥è¯¢æ”¾åœ¨FROMä¸­ï¼š</h4>

<p>Oracle:</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="p">(</span><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">ScoreTable</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">score</span> <span class="k">DESC</span><span class="p">)</span> <span class="k">WHERE</span> <span class="n">ROWNUM</span> <span class="o">&lt;=</span> <span class="mi">5</span><span class="p">;</span><span class="c1">-- æ±‚æˆç»©çš„å‰5å</span>
<span class="c1">-- è¯¯ï¼šSELECT * FROM ScoreTable WHERE ROWNUM &lt;= 5 ORDER BY score DESC;</span>
</code></pre></div></div>
<p>mysql:</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">--  mysql  Ver 8.0.21-0ubuntu0.20.04.4 for Linux on x86_64 ((Ubuntu))</span>
<span class="c1">--  å½“å‰ç‰ˆæœ¬mysqlä¸­æ²¡æœ‰ROWNUM, å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•å®ç°ROWNUM:</span>
<span class="k">SELECT</span> <span class="o">@</span><span class="n">ROWNUM</span> <span class="p">:</span><span class="o">=</span> <span class="o">@</span><span class="n">ROWNUM</span> <span class="o">+</span> <span class="mi">1</span> <span class="k">AS</span> <span class="n">ROWNUM</span><span class="p">,</span> <span class="n">sno</span><span class="p">,</span> <span class="n">score</span> <span class="k">FROM</span> <span class="p">(</span><span class="k">SELECT</span> <span class="o">@</span><span class="n">ROWNUM</span> <span class="p">:</span><span class="o">=</span> <span class="mi">0</span><span class="p">)</span><span class="n">r</span><span class="p">,</span> <span class="n">ScoreTable</span><span class="p">;</span>
<span class="c1">--  ä»¥@ç¬¦å·å¼€å¤´çš„å˜é‡æ˜¯ä¼šè¯å˜é‡ã€‚ç›´åˆ°ä¼šè¯ç»“æŸå‰å®ƒå¯ç”¨å’Œå¯è®¿é—®ã€‚</span>
<span class="c1">-- å› æ­¤è¯¥ä¾‹çš„å®ç°ä¸ºï¼š</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="p">(</span><span class="k">SELECT</span> <span class="o">@</span><span class="n">ROWNUM</span> <span class="p">:</span><span class="o">=</span> <span class="o">@</span><span class="n">ROWNUM</span> <span class="o">+</span> <span class="mi">1</span> <span class="k">AS</span> <span class="n">ROWNUM</span><span class="p">,</span> <span class="n">sno</span><span class="p">,</span> <span class="n">score</span> <span class="k">FROM</span> <span class="p">(</span><span class="k">SELECT</span> <span class="o">@</span><span class="n">ROWNUM</span> <span class="p">:</span><span class="o">=</span> <span class="mi">0</span><span class="p">)</span><span class="n">r</span><span class="p">,</span> <span class="n">ScoreTable</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">score</span> <span class="k">DESC</span><span class="p">)</span><span class="n">sc</span> <span class="k">WHERE</span> <span class="n">ROWNUM</span> <span class="o">&lt;=</span> <span class="mi">5</span><span class="p">;</span><span class="c1">-- æ±‚æˆç»©çš„å‰5å</span>
</code></pre></div></div>
<h3 id="ç›¸å…³å­æŸ¥è¯¢">ç›¸å…³å­æŸ¥è¯¢</h3>

<p>æ‰€æœ‰çš„å­æŸ¥è¯¢å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼Œå³ç›¸å…³å­æŸ¥è¯¢å’Œéç›¸å…³å­æŸ¥è¯¢</p>

<p>éç›¸å…³å­æŸ¥è¯¢æ˜¯ç‹¬ç«‹äºå¤–éƒ¨æŸ¥è¯¢çš„å­æŸ¥è¯¢ï¼Œå­æŸ¥è¯¢æ€»å…±æ‰§è¡Œä¸€æ¬¡ï¼Œæ‰§è¡Œå®Œæ¯•åå°†å€¼ä¼ é€’ç»™å¤–éƒ¨æŸ¥è¯¢ã€‚
ç›¸å…³å­æŸ¥è¯¢çš„æ‰§è¡Œä¾èµ–äºå¤–éƒ¨æŸ¥è¯¢çš„æ•°æ®ï¼Œå¤–éƒ¨æŸ¥è¯¢æ‰§è¡Œä¸€è¡Œï¼Œå­æŸ¥è¯¢å°±æ‰§è¡Œä¸€æ¬¡ã€‚æ‰§è¡ŒæŸ¥è¯¢çš„æ—¶å€™å…ˆå–å¾—å¤–å±‚æŸ¥è¯¢çš„ä¸€ä¸ªå±æ€§å€¼ï¼Œç„¶åæ‰§è¡Œä¸æ­¤å±æ€§å€¼ç›¸å…³çš„å­æŸ¥è¯¢ï¼Œæ‰§è¡Œå®Œæ¯•åå†å–å¾—å¤–å±‚çˆ¶æŸ¥è¯¢çš„ä¸‹ä¸€ä¸ªå€¼ï¼Œä¾æ¬¡å†æ¥é‡å¤æ‰§è¡Œå­æŸ¥è¯¢ï¼›æ•…éç›¸å…³å­æŸ¥è¯¢æ¯”ç›¸å…³å­æŸ¥è¯¢æ•ˆç‡é«˜ã€‚</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">sno</span><span class="p">,</span> <span class="n">score</span> <span class="k">FROM</span> <span class="n">ScoreTable</span> <span class="k">WHERE</span> <span class="k">EXISTS</span><span class="p">(</span><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">Temp</span> <span class="k">WHERE</span> <span class="n">sno</span> <span class="o">=</span> <span class="n">ScoreTable</span><span class="p">.</span><span class="n">sno</span> <span class="k">AND</span> <span class="n">sno</span> <span class="o">=</span> <span class="s1">'189074001'</span><span class="p">);</span>
<span class="c1">--  åŒï¼š</span>
<span class="k">SELECT</span> <span class="k">DISTINCT</span> <span class="n">sno</span><span class="p">,</span> <span class="n">gender</span><span class="p">,</span> <span class="n">dept</span><span class="p">,</span> <span class="n">remarks</span><span class="p">,</span> <span class="n">sname</span><span class="p">,</span> <span class="n">credit</span> <span class="k">FROM</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">a</span><span class="p">.</span><span class="o">*</span> <span class="k">FROM</span> <span class="k">Temp</span> <span class="n">a</span> <span class="k">LEFT</span> <span class="k">JOIN</span> <span class="n">ScoreTable</span> <span class="n">b</span> <span class="k">ON</span> <span class="n">a</span><span class="p">.</span><span class="n">sno</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">sno</span> <span class="k">WHERE</span> <span class="n">b</span><span class="p">.</span><span class="n">sno</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">)</span><span class="n">t</span><span class="p">;</span>
<span class="err">â€‹</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">Temp</span> <span class="k">WHERE</span> <span class="k">NOT</span> <span class="k">EXISTS</span> <span class="p">(</span><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">Subject</span> <span class="k">WHERE</span> <span class="k">NOT</span> <span class="k">EXISTS</span> <span class="p">(</span><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">ScoreTable</span> <span class="k">WHERE</span> <span class="k">Temp</span><span class="p">.</span><span class="n">sno</span> <span class="o">=</span> <span class="n">sno</span> <span class="k">AND</span> <span class="n">cno</span> <span class="o">=</span> <span class="n">Subject</span><span class="p">.</span><span class="n">cno</span><span class="p">));</span>
</code></pre></div></div>

<h3 id="ä¼ ç»Ÿé›†åˆè¿ç®—">ä¼ ç»Ÿé›†åˆè¿ç®—</h3>

<h4 id="å¹¶è¿ç®—">å¹¶è¿ç®—</h4>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">sno</span><span class="p">,</span> <span class="n">cno</span> <span class="k">FROM</span> <span class="n">ScoreTable</span> <span class="k">WHERE</span> <span class="n">cno</span> <span class="o">=</span> <span class="s1">'0001'</span> <span class="k">UNION</span> <span class="k">SELECT</span> <span class="n">sno</span><span class="p">,</span> <span class="n">cno</span> <span class="k">FROM</span> <span class="n">ScoreTable</span> <span class="k">WHERE</span> <span class="n">cno</span> <span class="o">=</span> <span class="s1">'0002'</span><span class="p">;</span>
<span class="c1">-- åŒï¼šSELECT sno, cno FROM ScoreTable WHERE cno IN ('0001', '0002');</span>
<span class="k">SELECT</span> <span class="n">sno</span> <span class="k">FROM</span> <span class="n">ScoreTable</span> <span class="k">UNION</span> <span class="k">SELECT</span> <span class="n">sno</span> <span class="k">FROM</span> <span class="k">Temp</span><span class="p">;</span>
</code></pre></div></div>
<ul>
  <li>UNION ALL ä¸å»é‡</li>
</ul>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">sno</span> <span class="k">FROM</span> <span class="k">Temp</span> <span class="k">WHERE</span> <span class="n">sno</span> <span class="k">IN</span> <span class="p">(</span><span class="s1">'189074000'</span><span class="p">,</span> <span class="s1">'189074001'</span><span class="p">)</span> 
<span class="k">UNION</span> <span class="k">ALL</span>
<span class="k">SELECT</span> <span class="n">sno</span> <span class="k">FROM</span> <span class="k">Temp</span> <span class="k">WHERE</span> <span class="n">sno</span> <span class="k">IN</span> <span class="p">(</span><span class="s1">'189074000'</span><span class="p">,</span> <span class="s1">'189074002'</span><span class="p">);</span>
</code></pre></div></div>
<h4 id="äº¤è¿ç®—">äº¤è¿ç®—</h4>

<ul>
  <li>mysqlåªæ”¯æŒUNIONè¿ç®—ï¼Œä¸æ”¯æŒINTERSECTè¿ç®—</li>
</ul>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">sno</span> <span class="k">FROM</span> <span class="n">ScoreTable</span> <span class="k">WHERE</span> <span class="n">cno</span> <span class="o">=</span> <span class="s1">'0001'</span> <span class="k">INTERSECT</span> <span class="k">SELECT</span> <span class="n">sno</span> <span class="k">FROM</span> <span class="n">ScoreTable</span> <span class="k">WHERE</span> <span class="n">cno</span> <span class="o">=</span> <span class="s1">'0002'</span><span class="p">;</span>
<span class="c1">-- åŒï¼šSELECT sno FROM ScoreTable WHERE cno = '0001' AND sno IN (SELECT sno FROM ScoreTable WHERE cno = '0002'); -- åœ¨mysqlä¸­å¯ä»¥è¿™æ ·å®ç°äº¤è¿ç®—</span>
</code></pre></div></div>
<h4 id="å·®è¿ç®—">å·®è¿ç®—</h4>

<ul>
  <li>mysqlä¸­ä¸æ”¯æŒMINUSè¿ç®—</li>
</ul>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">sno</span> <span class="k">FROM</span> <span class="k">Temp</span> <span class="n">MINUS</span> <span class="k">SELECT</span> <span class="n">sno</span> <span class="k">FROM</span> <span class="n">ScoreTable</span> <span class="k">WHERE</span> <span class="n">cno</span> <span class="o">=</span> <span class="s1">'0002'</span><span class="p">;</span>
<span class="c1">-- ORACLEä¸­ç”¨MINUSï¼ŒSQL SERVERä¸­ç”¨EXCEPT</span>
</code></pre></div></div>
<p>æŸ¥è¯¢æ¯”è®¡ç®—æœºä¸“ä¸šå¥³ç”Ÿäººæ•°è¿˜å°‘çš„ä¸“ä¸šåŠå¥³ç”Ÿäººæ•°</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">dept</span><span class="p">,</span> <span class="n">girl</span> 
<span class="k">FROM</span> 
<span class="p">(</span>
    <span class="k">SELECT</span> <span class="n">dept</span><span class="p">,</span> <span class="k">COUNT</span><span class="p">(</span><span class="k">CASE</span> <span class="k">WHEN</span> <span class="n">gender</span> <span class="o">=</span> <span class="s1">'å¥³'</span> <span class="k">THEN</span> <span class="s1">'1'</span> <span class="k">END</span><span class="p">)</span> <span class="n">girl</span> 
    <span class="k">FROM</span> <span class="k">Temp</span> 
    <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">dept</span> 
<span class="p">)</span>
<span class="k">WHERE</span> <span class="n">girl</span> <span class="o">&lt;</span> 
<span class="p">(</span>
       <span class="k">SELECT</span> <span class="n">girl</span> 
       <span class="k">FROM</span> 
       <span class="p">(</span>
          <span class="k">SELECT</span> <span class="n">dept</span><span class="p">,</span> <span class="k">COUNT</span><span class="p">(</span><span class="k">CASE</span> <span class="k">WHEN</span> <span class="n">gender</span> <span class="o">=</span> <span class="s1">'å¥³'</span> <span class="k">THEN</span> <span class="s1">'1'</span> <span class="k">END</span><span class="p">)</span> <span class="n">girl</span> 
          <span class="k">FROM</span> <span class="k">Temp</span> 
          <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">dept</span> 
       <span class="p">)</span>
      <span class="k">WHERE</span> <span class="n">dept</span> <span class="o">=</span> <span class="s1">'è®¡ç®—æœº'</span>
                                        
<span class="p">);</span>

<span class="c1">--  ä»¥ä¸‹ä»£ç ä¸æ­£ç¡®ï¼ˆå½“å­˜åœ¨æŸä¸“ä¸šå¥³ç”Ÿäººæ•°ä¸ºï¼æ—¶...ï¼‰</span>
<span class="k">SELECT</span> <span class="n">dept</span><span class="p">,</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="k">Temp</span> <span class="k">WHERE</span> <span class="n">gender</span> <span class="o">=</span> <span class="s1">'å¥³'</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">dept</span> <span class="k">HAVING</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="k">SELECT</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="k">FROM</span> <span class="k">Temp</span> <span class="k">WHERE</span> <span class="n">dept</span> <span class="o">=</span> <span class="s1">'è®¡ç®—æœº'</span> <span class="k">AND</span> <span class="n">gender</span> <span class="o">=</span> <span class="s1">'å¥³'</span><span class="p">);</span>

<span class="k">SELECT</span> <span class="k">DISTINCT</span> <span class="n">dept</span> 
<span class="k">FROM</span> <span class="k">Temp</span> 
<span class="n">MINUS</span> 
<span class="p">(</span>
    <span class="k">SELECT</span> <span class="n">dept</span> 
    <span class="k">FROM</span> <span class="k">Temp</span> 
    <span class="k">WHERE</span> <span class="n">gender</span> <span class="o">=</span> <span class="s1">'å¥³'</span> 
    <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">dept</span> 
    <span class="k">HAVING</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="p">(</span>
        <span class="k">SELECT</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
        <span class="k">FROM</span> <span class="k">Temp</span> 
        <span class="k">WHERE</span> <span class="n">dept</span> <span class="o">=</span> <span class="s1">'è®¡ç®—æœº'</span> <span class="k">AND</span> <span class="n">gender</span> <span class="o">=</span> <span class="s1">'å¥³'</span>
    <span class="p">)</span>
<span class="p">);</span>
</code></pre></div></div>

<h3 id="åˆ†é¡µæŸ¥è¯¢">åˆ†é¡µæŸ¥è¯¢</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">--  Oracle:</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">ROWNUM</span> <span class="n">rn</span><span class="p">,</span> <span class="n">sno</span><span class="p">,</span> <span class="n">sname</span><span class="p">,</span> <span class="n">dept</span><span class="p">,</span>  <span class="n">credit</span> <span class="k">FROM</span> <span class="k">Temp</span> <span class="k">WHERE</span> <span class="n">ROWNUM</span> <span class="o">&lt;=</span> <span class="n">currentPage</span> <span class="o">*</span> <span class="n">pageSize</span><span class="p">)</span><span class="n">tmp</span> <span class="k">WHERE</span> <span class="n">rn</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">currentPage</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">pageSize</span><span class="p">;</span>
<span class="err">â€‹</span>
<span class="c1">--  mysql:</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="p">(</span><span class="k">SELECT</span> <span class="o">@</span><span class="n">ROWNUM</span> <span class="p">:</span><span class="o">=</span> <span class="o">@</span><span class="n">ROWNUM</span> <span class="o">+</span> <span class="mi">1</span> <span class="k">AS</span> <span class="n">ROWNUM</span><span class="p">,</span> <span class="n">sno</span><span class="p">,</span> <span class="n">sname</span><span class="p">,</span> <span class="n">credit</span> <span class="k">FROM</span> <span class="p">(</span><span class="k">SELECT</span> <span class="o">@</span><span class="n">ROWNUM</span> <span class="p">:</span><span class="o">=</span> <span class="mi">0</span><span class="p">)</span><span class="n">r</span><span class="p">,</span> <span class="k">Temp</span><span class="p">)</span><span class="n">page</span> <span class="k">WHERE</span> <span class="n">ROWNUM</span> <span class="k">BETWEEN</span> <span class="p">((</span><span class="n">currentPage</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">pageSize</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="k">AND</span> <span class="p">(</span><span class="n">currentPage</span> <span class="o">*</span> <span class="n">pageSize</span><span class="p">);</span>
</code></pre></div></div>
<h3 id="ç´¢å¼•">ç´¢å¼•</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">INDEX</span> <span class="n">scoreT_score_idx</span> <span class="k">ON</span> <span class="n">ScoreTable</span><span class="p">(</span><span class="n">score</span><span class="p">);</span>
<span class="c1">-- CREATE UNIQUE INDEX temp_sname_uniq_idx ON Temp(sname);</span>
<span class="k">CREATE</span> <span class="k">INDEX</span> <span class="n">scoreT_idx</span> <span class="k">ON</span> <span class="n">ScoreTable</span><span class="p">(</span><span class="n">sno</span><span class="p">,</span> <span class="n">cno</span><span class="p">);</span><span class="c1">-- å¤åˆç´¢å¼•</span>
<span class="k">CREATE</span> <span class="k">INDEX</span> <span class="n">sub_cn_ct_idx</span> <span class="k">ON</span> <span class="n">Subject</span><span class="p">(</span><span class="n">cno</span> <span class="k">ASC</span><span class="p">,</span> <span class="n">ctime</span> <span class="k">DESC</span><span class="p">);</span><span class="c1">-- æŒ‡å®šç´¢å¼•å€¼çš„æ’åˆ—é¡ºåº</span>
</code></pre></div></div>
<h3 id="è§†å›¾">è§†å›¾</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">OR</span> <span class="k">REPLACE</span> <span class="k">VIEW</span> <span class="n">temp_CS_view</span>
<span class="k">AS</span> 
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">Temp</span> <span class="k">WHERE</span> <span class="n">dept</span> <span class="o">=</span> <span class="s1">'è®¡ç®—æœº'</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">OR</span> <span class="k">REPLACE</span> <span class="k">VIEW</span> <span class="n">score_sno_avg_view</span><span class="err">ï¼ˆ</span><span class="n">sno</span><span class="p">,</span> <span class="n">avg_score</span><span class="err">ï¼‰</span><span class="c1">-- è¦ä½¿ç”¨åˆ«å</span>
<span class="k">AS</span>
<span class="k">SELECT</span> <span class="n">sno</span><span class="p">,</span> <span class="k">AVG</span><span class="p">(</span><span class="n">score</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">ScoreTable</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">sno</span><span class="p">;</span>
</code></pre></div></div>
<h4 id="ä½¿ç”¨è§†å›¾">ä½¿ç”¨è§†å›¾</h4>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">score_sno_avg_view</span> <span class="k">WHERE</span> <span class="n">avg_score</span> <span class="o">&gt;</span> <span class="mi">85</span><span class="p">;</span>
<span class="c1">-- UPDATE score_sno_avg_view SET sno = 100 WHERE avg_score = 88;-- æ­¤è§†å›¾çš„æ•°æ®æ“çºµæ“ä½œéæ³•</span>
<span class="k">UPDATE</span> <span class="n">temp_CS_view</span> <span class="k">SET</span> <span class="n">sname</span> <span class="o">=</span> <span class="s1">'Amilia'</span> <span class="k">WHERE</span> <span class="n">sname</span> <span class="o">=</span> <span class="s1">'Amy'</span><span class="p">;</span><span class="c1">-- 1è¡Œå·²æ›´æ–°ã€‚</span>
</code></pre></div></div>
<h4 id="åˆ é™¤è§†å›¾">åˆ é™¤è§†å›¾</h4>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">DROP</span> <span class="k">view</span> <span class="n">temp_CS_view</span><span class="p">;</span>
</code></pre></div></div>
<h3 id="åŒä¹‰è¯">åŒä¹‰è¯</h3>

<ul>
  <li>mysqlä¸­æ²¡æœ‰synonym</li>
</ul>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">OR</span> <span class="k">REPLACE</span> <span class="k">PUBLIC</span> <span class="n">SYNONYM</span> <span class="n">score_s_a</span> <span class="k">FOR</span> <span class="n">score_sno_avg_view</span><span class="p">;</span><span class="c1">-- å…¬æœ‰åŒä¹‰è¯</span>
<span class="k">CREATE</span> <span class="k">OR</span> <span class="k">REPLACE</span> <span class="n">SYNONYM</span> <span class="n">score_sa</span> <span class="k">FOR</span> <span class="n">score_sno_avg_view</span><span class="p">;</span><span class="c1">-- ç§æœ‰åŒä¹‰è¯</span>
</code></pre></div></div>
<h3 id="åºåˆ—">åºåˆ—</h3>

<ul>
  <li>mysqlä¸­æ— SEQUENCE</li>
</ul>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="n">SEQUENCE</span> <span class="n">id_seq</span>
<span class="k">START</span> <span class="k">WITH</span> <span class="mi">189074012</span>
<span class="k">INCREMENT</span> <span class="k">BY</span> <span class="mi">1</span>
<span class="k">MAXVALUE</span> <span class="mi">189074999</span>
<span class="k">CACHE</span> <span class="mi">50</span><span class="p">;</span>

<span class="k">INSERT</span> <span class="k">INTO</span> <span class="k">Temp</span> <span class="k">VALUES</span><span class="p">(</span><span class="n">id_seq</span><span class="p">.</span><span class="n">NEXTVAL</span><span class="p">,</span> <span class="s1">'Larry'</span><span class="p">,</span> <span class="s1">'ç”·'</span><span class="p">,</span> <span class="s1">'è®¡ç®—æœº'</span><span class="p">,</span> <span class="s1">'ä¸‰æ— å­¦ç”Ÿ'</span><span class="p">,</span> <span class="s1">'10'</span><span class="p">,</span> <span class="s1">'1'</span><span class="p">);</span><span class="c1">-- 189074012</span>
<span class="k">SELECT</span> <span class="n">id_seq</span><span class="p">.</span><span class="n">CURRVAL</span> <span class="k">FROM</span> <span class="n">DUAL</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="n">id_seq</span><span class="p">.</span><span class="n">NEXTVAL</span> <span class="k">FROM</span> <span class="n">DUAL</span><span class="p">;</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="k">Temp</span> <span class="k">VALUES</span><span class="p">(</span><span class="n">id_seq</span><span class="p">.</span><span class="n">NEXTVAL</span><span class="p">,</span> <span class="s1">'Harry'</span><span class="p">,</span> <span class="s1">'ç”·'</span><span class="p">,</span> <span class="s1">'è®¡ç®—æœº'</span><span class="p">,</span> <span class="s1">'ä¸‰æ²™å­¦ç”Ÿ'</span><span class="p">,</span> <span class="s1">'15'</span><span class="p">,</span> <span class="s1">'1'</span><span class="p">);</span><span class="c1">-- 189074014</span>
</code></pre></div></div>
<h4 id="åˆ é™¤åºåˆ—">åˆ é™¤åºåˆ—</h4>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">DROP</span> <span class="n">SEQUENCE</span> <span class="n">id_seq</span><span class="p">;</span>
</code></pre></div></div>
<h3 id="pl-sqlç¼–ç¨‹">PL-SQLç¼–ç¨‹</h3>

<ul>
  <li>MySQLä¸æ”¯æŒanonymous code block</li>
</ul>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">/</span>
<span class="k">SET</span> <span class="n">SERVEROUTPUT</span> <span class="k">ON</span><span class="p">;</span>
<span class="k">DECLARE</span>
  <span class="n">stuno</span> <span class="k">Temp</span><span class="p">.</span><span class="n">sno</span><span class="o">%</span><span class="k">TYPE</span><span class="p">;</span>
  <span class="n">stuname</span> <span class="k">Temp</span><span class="p">.</span><span class="n">sname</span><span class="o">%</span><span class="k">TYPE</span><span class="p">;</span>
<span class="k">BEGIN</span>
  <span class="k">SELECT</span> <span class="n">sno</span><span class="p">,</span> <span class="n">sname</span> <span class="k">INTO</span> <span class="n">stuno</span><span class="p">,</span> <span class="n">stuname</span> <span class="k">FROM</span> <span class="k">Temp</span> <span class="k">WHERE</span> <span class="n">sno</span> <span class="o">=</span> <span class="s1">'189074005'</span><span class="p">;</span>
  <span class="n">DBMS_OUTPUT</span><span class="p">.</span><span class="n">PUT_LINE</span><span class="p">(</span><span class="n">stuno</span><span class="o">||</span><span class="n">stuname</span><span class="p">);</span>
<span class="k">END</span><span class="p">;</span>
<span class="o">/</span>
<span class="k">SET</span> <span class="n">SERVEROUTPUT</span> <span class="k">ON</span><span class="p">;</span>
<span class="k">DECLARE</span>
  <span class="n">stu</span> <span class="k">Temp</span><span class="o">%</span><span class="n">ROWTYPE</span><span class="p">;</span>
<span class="k">BEGIN</span>
  <span class="k">SELECT</span> <span class="o">*</span>  <span class="k">INTO</span> <span class="n">stu</span> <span class="k">FROM</span> <span class="k">Temp</span> <span class="k">WHERE</span> <span class="n">sno</span> <span class="o">=</span> <span class="s1">'189074005'</span><span class="p">;</span>
  <span class="n">DBMS_OUTPUT</span><span class="p">.</span><span class="n">PUT_LINE</span><span class="p">(</span><span class="n">stu</span><span class="p">.</span><span class="n">sno</span><span class="o">||</span><span class="n">stu</span><span class="p">.</span><span class="n">sname</span><span class="o">||</span><span class="n">stu</span><span class="p">.</span><span class="n">dept</span><span class="p">);</span>
<span class="k">END</span><span class="p">;</span>
<span class="o">/</span>
<span class="k">set</span> <span class="n">SERVEROUTPUT</span> <span class="k">ON</span><span class="p">;</span>
<span class="k">DECLARE</span>
    <span class="n">n</span> <span class="n">number</span><span class="p">;</span>
    <span class="k">result</span> <span class="n">number</span><span class="p">;</span>
<span class="k">BEGIN</span>
    <span class="n">n</span><span class="p">:</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>   <span class="k">result</span><span class="p">:</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
    <span class="n">while</span> <span class="n">n</span><span class="o">&lt;=</span><span class="mi">100</span> <span class="n">loop</span>
        <span class="k">result</span><span class="p">:</span><span class="o">=</span><span class="k">result</span><span class="o">+</span><span class="n">n</span><span class="p">;</span>
        <span class="n">n</span><span class="p">:</span><span class="o">=</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
    <span class="k">end</span> <span class="n">loop</span><span class="p">;</span>
    <span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="s1">'ç»“æœæ˜¯'</span><span class="o">||</span><span class="k">result</span><span class="p">);</span>
<span class="k">END</span><span class="p">;</span>
<span class="o">/</span>
</code></pre></div></div>
<h3 id="procedure-å­˜å‚¨è¿‡ç¨‹">PROCEDURE å­˜å‚¨è¿‡ç¨‹</h3>

<h4 id="åˆ›å»ºå­˜å‚¨è¿‡ç¨‹oracle">åˆ›å»ºå­˜å‚¨è¿‡ç¨‹(Oracle)</h4>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">OR</span> <span class="k">REPLACE</span> <span class="k">PROCEDURE</span> <span class="n">sp_calcsum1</span>
<span class="k">as</span>
    <span class="n">n</span> <span class="n">number</span><span class="p">;</span>   <span class="k">result</span> <span class="n">number</span><span class="p">;</span>
<span class="k">BEGIN</span>
    <span class="n">n</span><span class="p">:</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>   <span class="k">result</span><span class="p">:</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
    <span class="n">while</span> <span class="n">n</span><span class="o">&lt;=</span><span class="mi">100</span> <span class="n">loop</span>
        <span class="k">result</span><span class="p">:</span><span class="o">=</span><span class="k">result</span><span class="o">+</span><span class="n">n</span><span class="p">;</span>
        <span class="n">n</span><span class="p">:</span><span class="o">=</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
    <span class="k">end</span> <span class="n">loop</span><span class="p">;</span>
    <span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="s1">'ç»“æœæ˜¯'</span><span class="o">||</span><span class="k">result</span><span class="p">);</span>
<span class="k">END</span><span class="p">;</span>
<span class="cm">/*
   åœ¨viewï¼ˆè§†å›¾ï¼‰ä¸­ï¼Œåªèƒ½ä½¿ç”¨asï¼›
   åœ¨corsorï¼ˆæ¸¸æ ‡ï¼‰ä¸­ï¼Œåªèƒ½ä½¿ç”¨isï¼›
   å¯¹äºprocedureï¼ˆå­˜å‚¨è¿‡ç¨‹ï¼‰, functionï¼ˆå‡½æ•°ï¼‰, packageï¼ˆç¨‹åºåŒ…ï¼‰æ¥è¯´ï¼Œaså’Œisæ²¡æœ‰åŒºåˆ«ã€‚
*/</span>
</code></pre></div></div>
<h4 id="æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹oracle">æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹(Oracle)</h4>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">execute</span> <span class="n">sp_calcsum1</span><span class="p">;</span>

<span class="k">BEGIN</span> 
<span class="n">sp_calcsum1</span><span class="p">;</span>
<span class="k">END</span><span class="p">;</span>
<span class="o">/</span>
<span class="k">CREATE</span> <span class="k">OR</span> <span class="k">REPLACE</span> <span class="k">PROCEDURE</span> <span class="n">del_sc</span><span class="p">(</span><span class="n">stuNo</span> <span class="k">IN</span> <span class="k">Temp</span><span class="p">.</span><span class="n">sno</span><span class="o">%</span><span class="k">TYPE</span><span class="p">,</span> <span class="n">crsNo</span> <span class="k">IN</span> <span class="n">Subject</span><span class="p">.</span><span class="n">cno</span><span class="o">%</span><span class="k">TYPE</span><span class="p">)</span>
<span class="k">IS</span> <span class="cm">/*ä¸èƒ½åŠ DECLARE*/</span>
<span class="k">BEGIN</span> 
    <span class="k">DELETE</span> <span class="k">FROM</span> <span class="n">ScoreTable</span> <span class="k">WHERE</span> <span class="n">sno</span> <span class="o">=</span> <span class="n">stuNo</span> <span class="k">AND</span> <span class="n">cno</span> <span class="o">=</span> <span class="n">crsNo</span><span class="p">;</span>
<span class="n">EXCEPTION</span> 
    <span class="k">WHEN</span> <span class="n">NO_DATA_FOUND</span> <span class="k">THEN</span> 
        <span class="n">DBMS_OUTPUT</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="s1">'æ²¡æ‰¾åˆ°æ•°æ®ï¼'</span><span class="p">);</span>
    <span class="k">WHEN</span> <span class="n">OTHERS</span> <span class="k">THEN</span>
        <span class="n">DBMS_OUTPUT</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="s1">'äº§ç”Ÿå¼‚å¸¸ï¼'</span><span class="p">);</span>
<span class="k">END</span><span class="p">;</span>        
<span class="o">/</span>
<span class="k">EXECUTE</span> <span class="n">del_sc</span><span class="p">(</span><span class="s1">'189074000'</span><span class="p">,</span> <span class="s1">'0008'</span><span class="p">);</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">ScoreTable</span><span class="p">;</span>
<span class="err">â€‹</span>
<span class="o">/</span>
<span class="k">CREATE</span> <span class="k">OR</span> <span class="k">REPLACE</span> <span class="k">PROCEDURE</span> <span class="n">sel_score</span><span class="p">(</span><span class="n">stuNo</span> <span class="k">IN</span> <span class="k">Temp</span><span class="p">.</span><span class="n">sno</span><span class="o">%</span><span class="k">TYPE</span><span class="p">,</span> <span class="n">crsNo</span> <span class="k">IN</span> <span class="n">Subject</span><span class="p">.</span><span class="n">cno</span><span class="o">%</span><span class="k">TYPE</span><span class="p">,</span> <span class="n">sco</span> <span class="k">OUT</span> <span class="n">ScoreTable</span><span class="p">.</span><span class="n">score</span><span class="o">%</span><span class="k">TYPE</span><span class="p">)</span>
<span class="k">IS</span>
<span class="k">BEGIN</span>
    <span class="k">SELECT</span> <span class="n">score</span> <span class="k">INTO</span> <span class="n">sco</span> <span class="k">FROM</span> <span class="n">ScoreTable</span> <span class="k">WHERE</span> <span class="n">stuNo</span> <span class="o">=</span> <span class="n">sno</span> <span class="k">AND</span> <span class="n">crsNo</span> <span class="o">=</span> <span class="n">cno</span><span class="p">;</span>
<span class="n">EXCEPTION</span> 
    <span class="k">WHEN</span> <span class="n">NO_DATA_FOUND</span> <span class="k">THEN</span> 
        <span class="n">DBMS_OUTPUT</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="s1">'æ²¡æ‰¾åˆ°æ•°æ®ï¼'</span><span class="p">);</span>
    <span class="k">WHEN</span> <span class="n">OTHERS</span> <span class="k">THEN</span>
        <span class="n">DBMS_OUTPUT</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="s1">'äº§ç”Ÿå¼‚å¸¸ï¼'</span><span class="p">);</span> 
<span class="k">END</span><span class="p">;</span>    
<span class="o">/</span>
<span class="err">â€‹</span>
<span class="k">SET</span> <span class="n">SERVEROUTPUT</span> <span class="k">ON</span><span class="p">;</span>
<span class="k">DECLARE</span>
  <span class="n">score</span> <span class="n">ScoreTable</span><span class="p">.</span><span class="n">score</span><span class="o">%</span><span class="k">TYPE</span><span class="p">;</span>
<span class="k">BEGIN</span> 
  <span class="n">sel_score</span><span class="p">(</span><span class="s1">'189074000'</span><span class="p">,</span> <span class="s1">'0008'</span><span class="p">,</span> <span class="n">score</span><span class="p">);</span><span class="cm">/*ä¸éœ€è¦EXECUTE*/</span>
  <span class="n">DBMS_OUTPUT</span><span class="p">.</span><span class="n">PUT_LINE</span><span class="p">(</span><span class="n">score</span><span class="p">);</span>
<span class="k">END</span><span class="p">;</span>
<span class="o">/</span>
</code></pre></div></div>

<h4 id="åˆ›å»ºå­˜å‚¨è¿‡ç¨‹mysql">åˆ›å»ºå­˜å‚¨è¿‡ç¨‹ï¼ˆMysql)</h4>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">DELIMITER</span> <span class="err">$$</span>
<span class="err">â€‹</span>
<span class="k">CREATE</span> <span class="k">PROCEDURE</span> <span class="n">calcsum</span><span class="p">(</span><span class="k">OUT</span> <span class="k">sum</span> <span class="nb">INT</span><span class="p">)</span>
<span class="k">BEGIN</span> 
   <span class="k">DECLARE</span> <span class="n">n</span> <span class="nb">INT</span><span class="p">;</span>
   <span class="k">SET</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
   <span class="k">SET</span> <span class="k">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
   <span class="n">WHILE</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">100</span> <span class="k">do</span>
      <span class="k">SET</span> <span class="k">sum</span> <span class="o">=</span> <span class="k">sum</span> <span class="o">+</span> <span class="n">n</span><span class="p">;</span>
      <span class="k">SET</span> <span class="n">n</span> <span class="o">=</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
   <span class="k">END</span> <span class="n">WHILE</span><span class="p">;</span>
<span class="k">END</span><span class="p">;</span>
<span class="err">$$</span>
</code></pre></div></div>
<h4 id="æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹mysql">æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹ï¼ˆMysql)</h4>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">DELIMITER</span> <span class="p">;</span>
<span class="k">SET</span> <span class="o">@</span><span class="k">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">CALL</span> <span class="n">calcsum</span><span class="p">(</span><span class="o">@</span><span class="k">sum</span><span class="p">);</span>
 

<span class="k">FUNCTION</span>


<span class="o">/</span>
<span class="k">CREATE</span> <span class="k">OR</span> <span class="k">REPLACE</span> <span class="k">FUNCTION</span> <span class="n">f_calcsum</span><span class="p">(</span><span class="n">n</span> <span class="n">number</span><span class="p">)</span> <span class="k">return</span> <span class="nb">int</span>
<span class="k">as</span>
    <span class="n">i</span> <span class="n">number</span><span class="p">:</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
    <span class="k">result</span> <span class="n">number</span><span class="p">:</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
<span class="k">BEGIN</span>
    <span class="n">while</span> <span class="n">i</span><span class="o">&lt;=</span><span class="n">n</span> <span class="n">loop</span>
        <span class="k">result</span><span class="p">:</span><span class="o">=</span><span class="k">result</span><span class="o">+</span><span class="n">n</span><span class="p">;</span>
        <span class="n">i</span><span class="p">:</span><span class="o">=</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
    <span class="k">end</span> <span class="n">loop</span><span class="p">;</span>
    <span class="k">return</span> <span class="k">result</span><span class="p">;</span>
<span class="k">END</span><span class="p">;</span>
<span class="o">/</span>
<span class="k">DECLARE</span>
  <span class="k">result</span> <span class="nb">int</span><span class="p">:</span><span class="o">=</span><span class="n">f_calcsum</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
<span class="k">BEGIN</span>
  <span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="s1">'ç»“æœæ˜¯'</span><span class="o">||</span><span class="k">result</span><span class="p">);</span>
<span class="k">END</span><span class="p">;</span>
<span class="o">/</span>
</code></pre></div></div>
<h3 id="æ¸¸æ ‡">æ¸¸æ ‡</h3>

<h4 id="åˆ©ç”¨æ¸¸æ ‡å˜é‡å¾ªç¯">åˆ©ç”¨æ¸¸æ ‡å˜é‡å¾ªç¯</h4>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SET</span> <span class="n">SERVEROUTPUT</span> <span class="k">ON</span><span class="p">;</span>
<span class="k">DECLARE</span>
  <span class="n">stu</span> <span class="k">Temp</span><span class="o">%</span><span class="n">ROWTYPE</span><span class="p">;</span>
  <span class="k">CURSOR</span> <span class="n">cur_tmp</span> <span class="k">IS</span> <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">Temp</span><span class="p">;</span>
<span class="k">BEGIN</span>
  <span class="k">OPEN</span> <span class="n">cur_tmp</span><span class="p">;</span>
  <span class="n">LOOP</span>                  
    <span class="k">FETCH</span> <span class="n">cur_tmp</span> <span class="k">INTO</span> <span class="n">stu</span><span class="p">;</span>
    <span class="n">EXIT</span> <span class="k">WHEN</span> <span class="n">cur_tmp</span><span class="o">%</span><span class="n">NOTFOUND</span><span class="p">;</span>
    <span class="n">DBMS_OUTPUT</span><span class="p">.</span><span class="n">PUT_LINE</span><span class="p">(</span><span class="n">stu</span><span class="p">.</span><span class="n">sno</span><span class="o">||</span><span class="n">stu</span><span class="p">.</span><span class="n">sname</span><span class="p">);</span>
  <span class="k">END</span> <span class="n">LOOP</span><span class="p">;</span>
<span class="k">CLOSE</span> <span class="n">cur_tmp</span><span class="p">;</span>
<span class="k">END</span><span class="p">;</span>   
</code></pre></div></div>
<h4 id="forå¾ªç¯">FORå¾ªç¯</h4>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">/</span>
<span class="k">SET</span> <span class="n">SERVEROUTPUT</span> <span class="k">ON</span><span class="p">;</span>
<span class="k">DECLARE</span>
  <span class="k">CURSOR</span> <span class="n">cur_tmp</span> <span class="k">IS</span> <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">Temp</span><span class="p">;</span>
<span class="k">BEGIN</span>
<span class="c1">-- æ— éœ€æ‰‹åŠ¨æ‰“å¼€å…³é—­æ¸¸æ ‡</span>
  <span class="k">FOR</span> <span class="n">stu</span> <span class="k">IN</span> <span class="n">cur_tmp</span> <span class="n">LOOP</span>
  <span class="n">DBMS_OUTPUT</span><span class="p">.</span><span class="n">PUT_LINE</span><span class="p">(</span><span class="n">stu</span><span class="p">.</span><span class="n">sno</span><span class="o">||</span><span class="n">stu</span><span class="p">.</span><span class="n">sname</span><span class="p">);</span>
  <span class="k">END</span> <span class="n">LOOP</span><span class="p">;</span>
<span class="k">END</span><span class="p">;</span>
<span class="o">/</span>
<span class="err">â€‹</span>
<span class="o">/</span>
<span class="k">SET</span> <span class="n">SERVEROUTPUT</span> <span class="k">ON</span><span class="p">;</span>
<span class="k">BEGIN</span>
  <span class="k">FOR</span> <span class="n">stu</span> <span class="k">IN</span> <span class="p">(</span><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">Temp</span><span class="p">)</span> <span class="n">LOOP</span>
  <span class="n">DBMS_OUTPUT</span><span class="p">.</span><span class="n">PUT_LINE</span><span class="p">(</span><span class="n">stu</span><span class="p">.</span><span class="n">sno</span><span class="o">||</span><span class="n">stu</span><span class="p">.</span><span class="n">sname</span><span class="p">);</span>
  <span class="k">END</span> <span class="n">LOOP</span><span class="p">;</span> 
<span class="k">END</span><span class="p">;</span>
<span class="o">/</span>
<span class="k">SET</span> <span class="n">SERVEROUTPUT</span> <span class="k">ON</span><span class="p">;</span>
<span class="k">BEGIN</span> 
    <span class="k">FOR</span> <span class="n">stu</span> <span class="k">IN</span> <span class="p">(</span><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">Temp</span><span class="p">)</span> <span class="n">LOOP</span>
        <span class="n">IF</span> <span class="n">stu</span><span class="p">.</span><span class="n">sname</span>  <span class="k">LIKE</span> <span class="s1">'%J%'</span> <span class="k">THEN</span>
            <span class="n">DBMS_OUTPUT</span><span class="p">.</span><span class="n">PUT_LINE</span><span class="p">(</span><span class="n">stu</span><span class="p">.</span><span class="n">sname</span><span class="p">);</span>
        <span class="k">END</span> <span class="n">IF</span><span class="p">;</span>
    <span class="k">END</span> <span class="n">LOOP</span><span class="p">;</span>
<span class="k">END</span><span class="p">;</span>    
<span class="o">/</span>
<span class="k">SET</span> <span class="n">SERVEROUTPUT</span> <span class="k">ON</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">OR</span> <span class="k">REPLACE</span> <span class="k">PROCEDURE</span> <span class="n">find_name</span><span class="p">(</span><span class="n">name</span> <span class="k">Temp</span><span class="p">.</span><span class="n">sname</span><span class="o">%</span><span class="k">TYPE</span><span class="p">)</span>
<span class="k">AS</span>
<span class="k">BEGIN</span>
    <span class="k">FOR</span> <span class="n">stu</span> <span class="k">IN</span> <span class="p">(</span><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">Temp</span><span class="p">)</span> <span class="n">LOOP</span>
        <span class="n">IF</span> <span class="n">stu</span><span class="p">.</span><span class="n">sname</span> <span class="k">LIKE</span> <span class="s1">'%'</span><span class="o">||</span><span class="n">name</span><span class="o">||</span><span class="s1">'%'</span> <span class="k">THEN</span> 
            <span class="n">DBMS_OUTPUT</span><span class="p">.</span><span class="n">PUT_LINE</span><span class="p">(</span><span class="n">stu</span><span class="p">.</span><span class="n">sname</span><span class="p">);</span>
        <span class="k">END</span> <span class="n">IF</span><span class="p">;</span>
    <span class="k">END</span> <span class="n">LOOP</span><span class="p">;</span>
<span class="k">END</span><span class="p">;</span>    
<span class="o">/</span>
<span class="k">EXECUTE</span> <span class="n">find_name</span><span class="p">(</span><span class="s1">'J'</span><span class="p">);</span>
<span class="o">/</span>
</code></pre></div></div>
<h4 id="éšå¼æ¸¸æ ‡">éšå¼æ¸¸æ ‡</h4>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SET</span> <span class="n">SERVEROUTPUT</span> <span class="k">ON</span><span class="p">;</span>
<span class="k">BEGIN</span>
  <span class="k">UPDATE</span> <span class="k">Temp</span> <span class="k">SET</span> <span class="n">credit</span> <span class="o">=</span> <span class="n">credit</span> <span class="o">+</span> <span class="mi">1</span> <span class="k">WHERE</span> <span class="n">credit</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">;</span>
  <span class="n">IF</span> <span class="k">SQL</span><span class="o">%</span><span class="n">NOTFOUND</span> <span class="k">THEN</span>   
    <span class="n">DBMS_OUTPUT</span><span class="p">.</span><span class="n">PUT_LINE</span><span class="p">(</span><span class="s1">'æ²¡æœ‰è®°å½•è¢«æ›´æ”¹ï¼'</span><span class="p">);</span>
  <span class="k">ELSE</span>
    <span class="n">DBMS_OUTPUT</span><span class="p">.</span><span class="n">PUT_LINE</span><span class="p">(</span><span class="s1">'æ›´æ”¹äº†'</span><span class="o">||</span><span class="k">SQL</span><span class="o">%</span><span class="n">ROWCOUNT</span><span class="o">||</span><span class="s1">'æ¡è®°å½•ã€‚'</span><span class="p">);</span>
  <span class="k">END</span> <span class="n">IF</span><span class="p">;</span>
<span class="k">END</span><span class="p">;</span>
<span class="o">/</span>
</code></pre></div></div>
<h3 id="å¼‚å¸¸å¤„ç†">å¼‚å¸¸å¤„ç†</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">/</span>
<span class="k">DECLARE</span>
    <span class="n">stuno</span> <span class="k">Temp</span><span class="p">.</span><span class="n">sno</span><span class="o">%</span><span class="k">TYPE</span><span class="p">;</span>
    <span class="n">stuname</span> <span class="k">Temp</span><span class="p">.</span><span class="n">sname</span><span class="o">%</span><span class="k">TYPE</span><span class="p">;</span>
<span class="k">BEGIN</span>
    <span class="k">SELECT</span> <span class="n">sno</span><span class="p">,</span><span class="n">sname</span> <span class="k">INTO</span> <span class="n">stuno</span><span class="p">,</span><span class="n">stuname</span> <span class="k">FROM</span>  <span class="k">Temp</span> <span class="p">;</span>
    <span class="n">DBMS_OUTPUT</span><span class="p">.</span><span class="n">PUT_LINE</span><span class="p">(</span><span class="n">stuno</span><span class="o">||</span><span class="n">stuname</span><span class="p">);</span>
<span class="n">EXCEPTION</span>
    <span class="k">WHEN</span> <span class="n">no_data_found</span> <span class="k">THEN</span>
      <span class="n">DBMS_OUTPUT</span><span class="p">.</span><span class="n">PUT_LINE</span><span class="p">(</span><span class="s1">'æ•°æ®æ²¡æ‰¾åˆ°'</span><span class="p">);</span>
    <span class="k">WHEN</span> <span class="n">too_many_rows</span> <span class="k">THEN</span>
      <span class="n">DBMS_OUTPUT</span><span class="p">.</span><span class="n">PUT_LINE</span><span class="p">(</span><span class="s1">'ç»“æœé›†è¶…è¿‡ä¸€è¡Œ'</span><span class="p">);</span>
<span class="k">END</span><span class="p">;</span>
<span class="o">/</span>
<span class="k">DECLARE</span>
    <span class="n">null_exp</span> <span class="n">EXCEPTION</span><span class="p">;</span>
    <span class="n">stucj</span> <span class="n">Subject</span><span class="o">%</span><span class="n">ROWTYPE</span><span class="p">;</span>
<span class="k">BEGIN</span>
  <span class="n">stucj</span><span class="p">.</span><span class="n">cname</span><span class="p">:</span><span class="o">=</span><span class="s1">'001241'</span><span class="p">;</span> <span class="n">stucj</span><span class="p">.</span><span class="n">cno</span><span class="p">:</span><span class="o">=</span><span class="s1">'206'</span><span class="p">;</span>
  <span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Subject</span> <span class="k">VALUES</span><span class="p">(</span><span class="n">stucj</span><span class="p">.</span><span class="n">cno</span><span class="p">,</span><span class="n">stucj</span><span class="p">.</span><span class="n">cname</span><span class="p">,</span><span class="n">stucj</span><span class="p">.</span><span class="n">ctime</span><span class="p">);</span>
  <span class="n">IF</span> <span class="n">stucj</span><span class="p">.</span><span class="n">ctime</span> <span class="k">IS</span> <span class="k">NULL</span> <span class="k">THEN</span>   
   <span class="n">RAISE</span> <span class="n">null_exp</span><span class="p">;</span>   
  <span class="k">END</span> <span class="n">IF</span><span class="p">;</span>
<span class="n">EXCEPTION</span>
    <span class="k">WHEN</span> <span class="n">null_exp</span> <span class="k">THEN</span>
      <span class="n">DBMS_OUTPUT</span><span class="p">.</span><span class="n">PUT_LINE</span><span class="p">(</span><span class="s1">'æˆç»©ä¸èƒ½ä¸ºç©ºå€¼'</span><span class="p">);</span>
      <span class="k">ROLLBACK</span><span class="p">;</span>
    <span class="k">WHEN</span> <span class="n">others</span> <span class="k">THEN</span>
      <span class="n">DBMS_OUTPUT</span><span class="p">.</span><span class="n">PUT_LINE</span><span class="p">(</span><span class="s1">'å…¶ä»–å¼‚å¸¸'</span><span class="p">);</span>
<span class="k">END</span><span class="p">;</span>
<span class="o">/</span>
</code></pre></div></div>
<h3 id="è§¦å‘å™¨">è§¦å‘å™¨</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">ScoreT_log</span>
<span class="p">(</span>
    <span class="n">operate_type</span> <span class="n">varchar2</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>   
    <span class="n">operate_date</span> <span class="nb">date</span><span class="p">,</span>
    <span class="n">operate_user</span> <span class="n">varchar2</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
 <span class="p">);</span>
<span class="o">/</span>
<span class="k">CREATE</span> <span class="k">OR</span> <span class="k">REPLACE</span> <span class="k">TRIGGER</span> <span class="n">tri_ScoreT</span> <span class="k">BEFORE</span> <span class="k">INSERT</span> <span class="k">OR</span> <span class="k">DELETE</span> <span class="k">OR</span> <span class="k">UPDATE</span> <span class="k">ON</span> <span class="n">ScoreTable</span>
<span class="k">DECLARE</span> 
    <span class="n">operate_type</span> <span class="n">varchar2</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
<span class="k">BEGIN</span>
    <span class="n">IF</span> <span class="n">INSERTING</span> <span class="k">THEN</span> 
        <span class="n">operate_type</span> <span class="p">:</span><span class="o">=</span> <span class="s1">'INSERT'</span><span class="p">;</span>
    <span class="n">ELSIF</span> <span class="n">DELETING</span> <span class="k">THEN</span> 
        <span class="n">operate_type</span> <span class="p">:</span><span class="o">=</span> <span class="s1">'DELETE'</span><span class="p">;</span>
    <span class="k">ELSE</span>
        <span class="n">operate_type</span> <span class="p">:</span><span class="o">=</span> <span class="s1">'UPDATE'</span><span class="p">;</span>
    <span class="k">END</span> <span class="n">IF</span><span class="p">;</span>
    <span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">ScoreT_log</span> <span class="k">VALUES</span><span class="p">(</span><span class="n">operate_type</span><span class="p">,</span> <span class="n">sysdate</span><span class="p">,</span> <span class="n">ora_login_user</span> <span class="p">);</span>
<span class="k">END</span><span class="p">;</span>    
<span class="o">/</span>
<span class="k">UPDATE</span> <span class="n">ScoreTable</span> <span class="k">SET</span> <span class="n">score</span> <span class="o">=</span> <span class="mi">75</span> <span class="k">WHERE</span> <span class="n">sno</span> <span class="o">=</span> <span class="s1">'189074000'</span> <span class="k">AND</span> <span class="n">cno</span> <span class="o">=</span> <span class="s1">'0001'</span><span class="p">;</span>
<span class="c1">-- SELECT * FROM ScoreT_log;</span>
<span class="o">/</span>
<span class="k">CREATE</span> <span class="k">OR</span> <span class="k">REPLACE</span> <span class="k">TRIGGER</span> <span class="n">tri_del_tmp</span> <span class="k">AFTER</span> <span class="k">DELETE</span> <span class="k">ON</span> <span class="k">Temp</span>
<span class="k">FOR</span> <span class="k">EACH</span> <span class="k">ROW</span> 
<span class="k">BEGIN</span>
    <span class="k">DELETE</span> <span class="k">FROM</span> <span class="n">ScoreTable</span> <span class="k">WHERE</span> <span class="n">sno</span> <span class="o">=</span> <span class="p">:</span><span class="k">old</span><span class="p">.</span><span class="n">sno</span><span class="p">;</span>
<span class="k">END</span><span class="p">;</span>
<span class="o">/</span>
<span class="err">â€‹</span>
<span class="k">DELETE</span> <span class="k">FROM</span> <span class="k">Temp</span> <span class="k">WHERE</span> <span class="n">sno</span> <span class="o">=</span> <span class="s1">'189074011'</span><span class="p">;</span>
<span class="c1">-- SELECT * FROM ScoreTable;</span>
<span class="c1">-- SELECT * FROM ScoreT_log;</span>
</code></pre></div></div>
<h3 id="äº‹åŠ¡æäº¤ä¸å›é€€">äº‹åŠ¡æäº¤ä¸å›é€€</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SHOW</span> <span class="n">AUTOCOMMIT</span><span class="p">;</span>
<span class="k">SET</span> <span class="n">AUTOCOMMIT</span> <span class="k">ON</span><span class="p">;</span>
<span class="k">SET</span> <span class="n">AUTOCOMMIT</span> <span class="k">OFF</span><span class="p">;</span>
<span class="c1">-- æŸäº›SQLè¯­å¥ï¼ˆDDLè¯­å¥, DCLè¯­å¥, ï¼‰ï¼Œåœ¨å®ƒä»¬è¢«æ‰§è¡Œæ—¶ä¼šç”Ÿæˆéšå«çš„COMMITå‘½ä»¤ï¼Œå°†ä¼šé©¬ä¸Šå¯¼è‡´äº‹åŠ¡æäº¤ã€‚</span>
<span class="err">â€‹</span>
<span class="c1">-- åªæ’¤é”€ä¸€éƒ¨åˆ†äº‹åŠ¡  </span>
<span class="k">UPDATE</span> <span class="k">Temp</span> <span class="k">SET</span> <span class="n">remarks</span> <span class="o">=</span> <span class="s1">'ä¸‰åå­¦ç”Ÿ'</span> <span class="k">WHERE</span> <span class="n">sno</span> <span class="o">=</span> <span class="s1">'189074005'</span><span class="p">;</span> 
<span class="n">SAVEPOINT</span> <span class="n">t</span><span class="p">;</span>
<span class="k">UPDATE</span> <span class="k">Temp</span> <span class="k">SET</span> <span class="n">remarks</span> <span class="o">=</span> <span class="s1">'ä¸‰åå­¦ç”Ÿ'</span><span class="p">,</span> <span class="n">dept</span> <span class="o">=</span> <span class="s1">'è½¯ä»¶å·¥ç¨‹'</span> <span class="k">WHERE</span> <span class="n">sno</span> <span class="o">=</span> <span class="s1">'189074006'</span><span class="p">;</span> 
<span class="k">ROLLBACK</span> <span class="k">TO</span> <span class="n">t</span><span class="p">;</span>
</code></pre></div></div>
<h3 id="jdbc">JDBC</h3>

<h4 id="jdbc-execute">JDBC execute</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">priv.Matrix.mine</span><span class="o">;</span>
<span class="err">â€‹</span>
<span class="kn">import</span> <span class="nn">java.sql.Connection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.DriverManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.ResultSet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.SQLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.Statement</span><span class="o">;</span>
<span class="err">â€‹</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Execute</span> 
<span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span>
    <span class="o">{</span>
<span class="err">â€‹</span>
        <span class="nc">String</span> <span class="n">conStr</span> <span class="o">=</span> <span class="s">"jdbc:oracle:thin:@localhost:1521:xe"</span><span class="o">;</span>
        <span class="nc">String</span> <span class="n">username</span> <span class="o">=</span> <span class="s">"user1"</span><span class="o">;</span>
        <span class="nc">String</span> <span class="n">password</span> <span class="o">=</span> <span class="s">"user1"</span><span class="o">;</span>
<span class="err">â€‹</span>
        <span class="nc">Connection</span> <span class="n">con</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="nc">Statement</span> <span class="n">stmt</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="nc">ResultSet</span> <span class="n">rs</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="err">â€‹</span>
        <span class="nc">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">"CREATE TABLE tmp"</span>
            <span class="o">+</span> <span class="s">"("</span>
            <span class="o">+</span> <span class="s">"     id varchar2(20),"</span>
            <span class="o">+</span> <span class="s">"     info varchar2(30)"</span>
            <span class="o">+</span> <span class="s">")"</span><span class="o">;</span>
<span class="err">â€‹</span>
<span class="err">â€‹</span>
        <span class="k">try</span>
        <span class="o">{</span>
            <span class="nc">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">"oracle.jdbc.driver.OracleDriver"</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">catch</span> <span class="o">(</span><span class="nc">ClassNotFoundException</span> <span class="n">e</span><span class="o">)</span>
        <span class="o">{</span>
            <span class="o">--</span>  <span class="no">TODO</span> <span class="nc">Auto</span><span class="o">-</span><span class="n">generated</span> <span class="k">catch</span> <span class="n">block</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
<span class="err">â€‹</span>
        <span class="k">try</span>
        <span class="o">{</span>
            <span class="n">con</span> <span class="o">=</span> <span class="nc">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="n">conStr</span><span class="o">,</span> <span class="n">username</span><span class="o">,</span> <span class="n">password</span><span class="o">);</span>
            <span class="n">stmt</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">createStatement</span><span class="o">();</span>
            <span class="kt">boolean</span> <span class="n">isResultSet</span> <span class="o">=</span> <span class="n">stmt</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>
            <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
            <span class="kt">int</span> <span class="n">rowAffected</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
            <span class="k">while</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span>
            <span class="o">{</span>
                <span class="k">if</span><span class="o">(</span><span class="n">isResultSet</span><span class="o">)</span>
                <span class="o">{</span>
                    <span class="n">count</span><span class="o">++;</span>
                    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"ResultSet:"</span> <span class="o">+</span> <span class="n">count</span><span class="o">);</span>
                    <span class="n">rs</span> <span class="o">=</span> <span class="n">stmt</span><span class="o">.</span><span class="na">getResultSet</span><span class="o">();</span>
                    <span class="k">while</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span>
                    <span class="o">{</span>
                        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"id"</span><span class="o">)</span> <span class="o">+</span> <span class="s">"\t"</span> <span class="o">+</span> <span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"info"</span><span class="o">));</span>
                    <span class="o">}</span>
<span class="err">â€‹</span>
                <span class="o">}</span>
                <span class="k">else</span>
                <span class="o">{</span>
                    <span class="n">rowAffected</span> <span class="o">=</span> <span class="n">stmt</span><span class="o">.</span><span class="na">getUpdateCount</span><span class="o">();</span>
                    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"row affected:"</span> <span class="o">+</span> <span class="n">rowAffected</span><span class="o">);</span>
                    <span class="k">if</span><span class="o">(</span><span class="n">rowAffected</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span>
                    <span class="o">{</span>
                        <span class="k">break</span><span class="o">;</span>
                    <span class="o">}</span>
<span class="err">â€‹</span>
                <span class="o">}</span>
                <span class="n">stmt</span><span class="o">.</span><span class="na">getMoreResults</span><span class="o">();</span>
            <span class="o">}</span>
<span class="err">â€‹</span>
        <span class="o">}</span>
        <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span>
        <span class="o">{</span>
            <span class="o">--</span>  <span class="no">TODO</span> <span class="nc">Auto</span><span class="o">-</span><span class="n">generated</span> <span class="k">catch</span> <span class="n">block</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
<span class="err">â€‹</span>
    <span class="o">}</span>
<span class="err">â€‹</span>
<span class="err">â€‹</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="jdbc-executebatch">JDBC executeBatch</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">priv.Matrix.mine</span><span class="o">;</span>
<span class="err">â€‹</span>
<span class="kn">import</span> <span class="nn">java.sql.Connection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.DriverManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.SQLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.Statement</span><span class="o">;</span>
<span class="err">â€‹</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Execute</span> 
<span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span>
    <span class="o">{</span>
<span class="err">â€‹</span>
        <span class="nc">String</span> <span class="n">conStr</span> <span class="o">=</span> <span class="s">"jdbc:oracle:thin:@localhost:1521:xe"</span><span class="o">;</span>
        <span class="nc">String</span> <span class="n">username</span> <span class="o">=</span> <span class="s">"user1"</span><span class="o">;</span>
        <span class="nc">String</span> <span class="n">password</span> <span class="o">=</span> <span class="s">"user1"</span><span class="o">;</span>
<span class="err">â€‹</span>
        <span class="nc">Connection</span> <span class="n">con</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="nc">Statement</span> <span class="n">stmt</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="err">â€‹</span>
        <span class="nc">String</span> <span class="n">createTab</span> <span class="o">=</span> <span class="o">(</span><span class="s">"CREATE TABLE tmp"</span>
                <span class="o">+</span> <span class="s">"("</span>
                <span class="o">+</span> <span class="s">"     id varchar2(20),"</span>
                <span class="o">+</span> <span class="s">"     info varchar2(30)"</span>
                <span class="o">+</span> <span class="s">")"</span><span class="o">);</span>
<span class="err">â€‹</span>
        <span class="kt">int</span><span class="o">[]</span> <span class="n">rowAffected</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="mi">3</span><span class="o">];</span>
<span class="err">â€‹</span>
        <span class="k">try</span>
        <span class="o">{</span>
            <span class="nc">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">"oracle.jdbc.driver.OracleDriver"</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">catch</span> <span class="o">(</span><span class="nc">ClassNotFoundException</span> <span class="n">e</span><span class="o">)</span>
        <span class="o">{</span>
            <span class="o">--</span>  <span class="no">TODO</span> <span class="nc">Auto</span><span class="o">-</span><span class="n">generated</span> <span class="k">catch</span> <span class="n">block</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
<span class="err">â€‹</span>
        <span class="k">try</span>
        <span class="o">{</span>
            <span class="n">con</span> <span class="o">=</span> <span class="nc">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="n">conStr</span><span class="o">,</span> <span class="n">username</span><span class="o">,</span> <span class="n">password</span><span class="o">);</span>
            <span class="n">stmt</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">createStatement</span><span class="o">();</span>
<span class="err">â€‹</span>
            <span class="n">stmt</span><span class="o">.</span><span class="na">executeUpdate</span><span class="o">(</span><span class="n">createTab</span><span class="o">);</span>
<span class="err">â€‹</span>
            <span class="n">stmt</span><span class="o">.</span><span class="na">addBatch</span><span class="o">(</span><span class="s">"INSERT INTO tmp VALUES('10001', 'first_info')"</span><span class="o">);</span>
            <span class="n">stmt</span><span class="o">.</span><span class="na">addBatch</span><span class="o">(</span><span class="s">"UPDATE tmp SET info = 'second_info' WHERE id = '10001'"</span><span class="o">);</span>
            <span class="n">stmt</span><span class="o">.</span><span class="na">addBatch</span><span class="o">(</span><span class="s">"DELETE FROM tmp WHERE id = '10001'"</span><span class="o">);</span>
<span class="err">â€‹</span>
            <span class="n">rowAffected</span> <span class="o">=</span> <span class="n">stmt</span><span class="o">.</span><span class="na">executeBatch</span><span class="o">();</span>
<span class="err">â€‹</span>
            <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
            <span class="o">{</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"row affected:"</span> <span class="o">+</span> <span class="n">rowAffected</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span>
            <span class="o">}</span>
<span class="err">â€‹</span>
        <span class="o">}</span>
        <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span>
        <span class="o">{</span>
            <span class="o">--</span>  <span class="no">TODO</span> <span class="nc">Auto</span><span class="o">-</span><span class="n">generated</span> <span class="k">catch</span> <span class="n">block</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
<span class="err">â€‹</span>
    <span class="o">}</span>
<span class="err">â€‹</span>
<span class="err">â€‹</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="jdbc-preparedstatement">JDBC PreparedStatement</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">priv.Matrix.mine</span><span class="o">;</span>
<span class="err">â€‹</span>
<span class="kn">import</span> <span class="nn">java.sql.Connection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.DriverManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.PreparedStatement</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.ResultSet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.SQLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.Statement</span><span class="o">;</span>
<span class="err">â€‹</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Execute</span> 
<span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span>
    <span class="o">{</span>
<span class="err">â€‹</span>
        <span class="nc">String</span> <span class="n">conStr</span> <span class="o">=</span> <span class="s">"jdbc:oracle:thin:@localhost:1521:xe"</span><span class="o">;</span>
        <span class="nc">String</span> <span class="n">username</span> <span class="o">=</span> <span class="s">"user1"</span><span class="o">;</span>
        <span class="nc">String</span> <span class="n">password</span> <span class="o">=</span> <span class="s">"user1"</span><span class="o">;</span>
<span class="err">â€‹</span>
        <span class="nc">Connection</span> <span class="n">con</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="nc">Statement</span> <span class="n">stmt</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="nc">ResultSet</span> <span class="n">rs</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="err">â€‹</span>
        <span class="nc">String</span> <span class="n">createTab</span> <span class="o">=</span> <span class="o">(</span><span class="s">"CREATE TABLE tmp"</span>
                <span class="o">+</span> <span class="s">"("</span>
                <span class="o">+</span> <span class="s">"     id varchar2(20),"</span>
                <span class="o">+</span> <span class="s">"     info varchar2(30)"</span>
                <span class="o">+</span> <span class="s">")"</span><span class="o">);</span>
<span class="err">â€‹</span>
<span class="err">â€‹</span>
        <span class="k">try</span>
        <span class="o">{</span>
            <span class="nc">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">"oracle.jdbc.driver.OracleDriver"</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">catch</span> <span class="o">(</span><span class="nc">ClassNotFoundException</span> <span class="n">e</span><span class="o">)</span>
        <span class="o">{</span>
            <span class="o">--</span>  <span class="no">TODO</span> <span class="nc">Auto</span><span class="o">-</span><span class="n">generated</span> <span class="k">catch</span> <span class="n">block</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
<span class="err">â€‹</span>
        <span class="k">try</span>
        <span class="o">{</span>
            <span class="n">con</span> <span class="o">=</span> <span class="nc">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="n">conStr</span><span class="o">,</span> <span class="n">username</span><span class="o">,</span> <span class="n">password</span><span class="o">);</span>
<span class="err">â€‹</span>
            <span class="n">stmt</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">createStatement</span><span class="o">();</span>
            <span class="n">stmt</span><span class="o">.</span><span class="na">executeUpdate</span><span class="o">(</span><span class="n">createTab</span><span class="o">);</span>
<span class="err">â€‹</span>
            <span class="nc">PreparedStatement</span> <span class="n">pstmtInsert</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="s">"INSERT INTO tmp VALUES(?, ?)"</span><span class="o">);</span>
            <span class="nc">PreparedStatement</span> <span class="n">pstmtSelect</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="s">"SELECT * FROM tmp WHERE id = ?"</span><span class="o">);</span>
            <span class="nc">PreparedStatement</span> <span class="n">pstmtUpdate</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="s">"UPDATE tmp SET info = ? WHERE id = ?"</span><span class="o">);</span>
            <span class="nc">PreparedStatement</span> <span class="n">pstmtDelete</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="s">"DELETE FROM tmp WHERE id = ?"</span><span class="o">);</span>
<span class="err">â€‹</span>
           <span class="o">--</span> <span class="n">è¯¥å­—ç¬¦ä¸²ä¸éœ€è¦åŠ å•å¼•å·</span><span class="o">(</span><span class="err">'</span><span class="o">)</span><span class="err">ï¼Œ</span><span class="n">å³</span><span class="s">"INSERT INTO tmp VALUES('?', '?')"</span><span class="n">æ˜¯é”™çš„</span>  
            <span class="n">pstmtInsert</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="s">"10001"</span><span class="o">);</span>
            <span class="n">pstmtInsert</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="s">"first info"</span><span class="o">);</span>
            <span class="n">pstmtInsert</span><span class="o">.</span><span class="na">executeUpdate</span><span class="o">();</span>
<span class="err">â€‹</span>
            <span class="n">pstmtSelect</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="s">"10001"</span><span class="o">);</span>
            <span class="n">rs</span> <span class="o">=</span> <span class="n">pstmtSelect</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">();</span>
            <span class="k">while</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span>
            <span class="o">{</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"id"</span><span class="o">)</span> <span class="o">+</span> <span class="s">"\t"</span> <span class="o">+</span> <span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"info"</span><span class="o">));</span>
            <span class="o">}</span>
<span class="err">â€‹</span>
<span class="err">â€‹</span>
            <span class="n">pstmtUpdate</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="s">"second info"</span><span class="o">);</span>
            <span class="n">pstmtUpdate</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="s">"10001"</span><span class="o">);</span>
            <span class="n">pstmtUpdate</span><span class="o">.</span><span class="na">executeUpdate</span><span class="o">();</span>
<span class="err">â€‹</span>
            <span class="n">pstmtDelete</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="s">"10001"</span><span class="o">);</span>
            <span class="n">pstmtDelete</span><span class="o">.</span><span class="na">executeUpdate</span><span class="o">();</span>
<span class="err">â€‹</span>
<span class="err">â€‹</span>
<span class="err">â€‹</span>
<span class="err">â€‹</span>
<span class="err">â€‹</span>
        <span class="o">}</span>
        <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span>
        <span class="o">{</span>
            <span class="o">--</span>  <span class="no">TODO</span> <span class="nc">Auto</span><span class="o">-</span><span class="n">generated</span> <span class="k">catch</span> <span class="n">block</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
<span class="err">â€‹</span>
    <span class="o">}</span>
<span class="err">â€‹</span>
<span class="err">â€‹</span>
<span class="o">}</span>
</code></pre></div></div>
:ET